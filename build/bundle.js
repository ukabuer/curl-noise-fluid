!function(){"use strict";"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function t(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function e(t,e,n){return t(n={path:e,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}
/*! *****************************************************************************
	Copyright (c) Microsoft Corporation.

	Permission to use, copy, modify, and/or distribute this software for any
	purpose with or without fee is hereby granted.

	THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	PERFORMANCE OF THIS SOFTWARE.
	***************************************************************************** */(null==e&&n.path)}},n.exports),n.exports}function n(t){return t&&t.default||t}var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};var a=Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]};function i(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function s(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,a=n.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}function u(t){return this instanceof u?(this.v=t,this):new u(t)}var c=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e};var l=Object.freeze({__proto__:null,__extends:function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},get __assign(){return o},__rest:function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]])}return n},__decorate:function(t,e,n,r){var o,a=arguments.length,i=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(i=(a<3?o(i):a>3?o(e,n,i):o(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i},__param:function(t,e){return function(n,r){e(n,r,t)}},__metadata:function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},__awaiter:function(t,e,n,r){return new(n||(n=Promise))((function(o,a){function i(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,s)}u((r=r.apply(t,e||[])).next())}))},__generator:function(t,e){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(t){a=[6,t],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},__createBinding:a,__exportStar:function(t,e){for(var n in t)"default"===n||e.hasOwnProperty(n)||a(e,t,n)},__values:i,__read:s,__spread:function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(s(arguments[e]));return t},__spreadArrays:function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var a=arguments[e],i=0,s=a.length;i<s;i++,o++)r[o]=a[i];return r},__await:u,__asyncGenerator:function(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,o=n.apply(t,e||[]),a=[];return r={},i("next"),i("throw"),i("return"),r[Symbol.asyncIterator]=function(){return this},r;function i(t){o[t]&&(r[t]=function(e){return new Promise((function(n,r){a.push([t,e,n,r])>1||s(t,e)}))})}function s(t,e){try{(n=o[t](e)).value instanceof u?Promise.resolve(n.value.v).then(c,l):d(a[0][2],n)}catch(t){d(a[0][3],t)}var n}function c(t){s("next",t)}function l(t){s("throw",t)}function d(t,e){t(e),a.shift(),a.length&&s(a[0][0],a[0][1])}},__asyncDelegator:function(t){var e,n;return e={},r("next"),r("throw",(function(t){throw t})),r("return"),e[Symbol.iterator]=function(){return this},e;function r(r,o){e[r]=t[r]?function(e){return(n=!n)?{value:u(t[r](e)),done:"return"===r}:o?o(e):e}:o}},__asyncValues:function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=i(t),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(n){e[n]=t[n]&&function(e){return new Promise((function(r,o){(function(t,e,n,r){Promise.resolve(r).then((function(e){t({value:e,done:n})}),e)})(r,o,(e=t[n](e)).done,e.value)}))}}},__makeTemplateObject:function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},__importStar:function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&a(e,t,n);return c(e,t),e},__importDefault:function(t){return t&&t.__esModule?t:{default:t}},__classPrivateFieldGet:function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)},__classPrivateFieldSet:function(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}}),d=1e-6,f="undefined"!=typeof Float32Array?Float32Array:Array,h=Math.random;var p=Math.PI/180;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var _=Object.freeze({__proto__:null,EPSILON:d,get ARRAY_TYPE(){return f},RANDOM:h,setMatrixArrayType:function(t){f=t},toRadian:function(t){return t*p},equals:function(t,e){return Math.abs(t-e)<=d*Math.max(1,Math.abs(t),Math.abs(e))}});function m(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],s=n[0],u=n[1],c=n[2],l=n[3];return t[0]=r*s+a*u,t[1]=o*s+i*u,t[2]=r*c+a*l,t[3]=o*c+i*l,t}function v(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}var b=m,g=v,y=Object.freeze({__proto__:null,create:function(){var t=new f(4);return f!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t},clone:function(t){var e=new f(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},copy:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},identity:function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},fromValues:function(t,e,n,r){var o=new f(4);return o[0]=t,o[1]=e,o[2]=n,o[3]=r,o},set:function(t,e,n,r,o){return t[0]=e,t[1]=n,t[2]=r,t[3]=o,t},transpose:function(t,e){if(t===e){var n=e[1];t[1]=e[2],t[2]=n}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t},invert:function(t,e){var n=e[0],r=e[1],o=e[2],a=e[3],i=n*a-o*r;return i?(i=1/i,t[0]=a*i,t[1]=-r*i,t[2]=-o*i,t[3]=n*i,t):null},adjoint:function(t,e){var n=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=n,t},determinant:function(t){return t[0]*t[3]-t[2]*t[1]},multiply:m,rotate:function(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+a*s,t[1]=o*u+i*s,t[2]=r*-s+a*u,t[3]=o*-s+i*u,t},scale:function(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],s=n[0],u=n[1];return t[0]=r*s,t[1]=o*s,t[2]=a*u,t[3]=i*u,t},fromRotation:function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t},fromScaling:function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t},str:function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},frob:function(t){return Math.hypot(t[0],t[1],t[2],t[3])},LDU:function(t,e,n,r){return t[2]=r[2]/r[0],n[0]=r[0],n[1]=r[1],n[3]=r[3]-t[2]*n[1],[t,e,n]},add:function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t},subtract:v,exactEquals:function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},equals:function(t,e){var n=t[0],r=t[1],o=t[2],a=t[3],i=e[0],s=e[1],u=e[2],c=e[3];return Math.abs(n-i)<=d*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(r-s)<=d*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(o-u)<=d*Math.max(1,Math.abs(o),Math.abs(u))&&Math.abs(a-c)<=d*Math.max(1,Math.abs(a),Math.abs(c))},multiplyScalar:function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t},multiplyScalarAndAdd:function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t},mul:b,sub:g});function M(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],s=e[4],u=e[5],c=n[0],l=n[1],d=n[2],f=n[3],h=n[4],p=n[5];return t[0]=r*c+a*l,t[1]=o*c+i*l,t[2]=r*d+a*f,t[3]=o*d+i*f,t[4]=r*h+a*p+s,t[5]=o*h+i*p+u,t}function x(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t}var w=M,A=x,E=Object.freeze({__proto__:null,create:function(){var t=new f(6);return f!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t},clone:function(t){var e=new f(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},copy:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},identity:function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},fromValues:function(t,e,n,r,o,a){var i=new f(6);return i[0]=t,i[1]=e,i[2]=n,i[3]=r,i[4]=o,i[5]=a,i},set:function(t,e,n,r,o,a,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=o,t[4]=a,t[5]=i,t},invert:function(t,e){var n=e[0],r=e[1],o=e[2],a=e[3],i=e[4],s=e[5],u=n*a-r*o;return u?(u=1/u,t[0]=a*u,t[1]=-r*u,t[2]=-o*u,t[3]=n*u,t[4]=(o*s-a*i)*u,t[5]=(r*i-n*s)*u,t):null},determinant:function(t){return t[0]*t[3]-t[1]*t[2]},multiply:M,rotate:function(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],s=e[4],u=e[5],c=Math.sin(n),l=Math.cos(n);return t[0]=r*l+a*c,t[1]=o*l+i*c,t[2]=r*-c+a*l,t[3]=o*-c+i*l,t[4]=s,t[5]=u,t},scale:function(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],s=e[4],u=e[5],c=n[0],l=n[1];return t[0]=r*c,t[1]=o*c,t[2]=a*l,t[3]=i*l,t[4]=s,t[5]=u,t},translate:function(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],s=e[4],u=e[5],c=n[0],l=n[1];return t[0]=r,t[1]=o,t[2]=a,t[3]=i,t[4]=r*c+a*l+s,t[5]=o*c+i*l+u,t},fromRotation:function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t[4]=0,t[5]=0,t},fromScaling:function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t},fromTranslation:function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t},str:function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},frob:function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)},add:function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t},subtract:x,multiplyScalar:function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t},multiplyScalarAndAdd:function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t},exactEquals:function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]},equals:function(t,e){var n=t[0],r=t[1],o=t[2],a=t[3],i=t[4],s=t[5],u=e[0],c=e[1],l=e[2],f=e[3],h=e[4],p=e[5];return Math.abs(n-u)<=d*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(r-c)<=d*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(o-l)<=d*Math.max(1,Math.abs(o),Math.abs(l))&&Math.abs(a-f)<=d*Math.max(1,Math.abs(a),Math.abs(f))&&Math.abs(i-h)<=d*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(s-p)<=d*Math.max(1,Math.abs(s),Math.abs(p))},mul:w,sub:A});function S(){var t=new f(9);return f!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function C(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],s=e[4],u=e[5],c=e[6],l=e[7],d=e[8],f=n[0],h=n[1],p=n[2],_=n[3],m=n[4],v=n[5],b=n[6],g=n[7],y=n[8];return t[0]=f*r+h*i+p*c,t[1]=f*o+h*s+p*l,t[2]=f*a+h*u+p*d,t[3]=_*r+m*i+v*c,t[4]=_*o+m*s+v*l,t[5]=_*a+m*u+v*d,t[6]=b*r+g*i+y*c,t[7]=b*o+g*s+y*l,t[8]=b*a+g*u+y*d,t}function O(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t}var k=C,R=O,P=Object.freeze({__proto__:null,create:S,fromMat4:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t},clone:function(t){var e=new f(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},copy:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},fromValues:function(t,e,n,r,o,a,i,s,u){var c=new f(9);return c[0]=t,c[1]=e,c[2]=n,c[3]=r,c[4]=o,c[5]=a,c[6]=i,c[7]=s,c[8]=u,c},set:function(t,e,n,r,o,a,i,s,u,c){return t[0]=e,t[1]=n,t[2]=r,t[3]=o,t[4]=a,t[5]=i,t[6]=s,t[7]=u,t[8]=c,t},identity:function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},transpose:function(t,e){if(t===e){var n=e[1],r=e[2],o=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=r,t[7]=o}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t},invert:function(t,e){var n=e[0],r=e[1],o=e[2],a=e[3],i=e[4],s=e[5],u=e[6],c=e[7],l=e[8],d=l*i-s*c,f=-l*a+s*u,h=c*a-i*u,p=n*d+r*f+o*h;return p?(p=1/p,t[0]=d*p,t[1]=(-l*r+o*c)*p,t[2]=(s*r-o*i)*p,t[3]=f*p,t[4]=(l*n-o*u)*p,t[5]=(-s*n+o*a)*p,t[6]=h*p,t[7]=(-c*n+r*u)*p,t[8]=(i*n-r*a)*p,t):null},adjoint:function(t,e){var n=e[0],r=e[1],o=e[2],a=e[3],i=e[4],s=e[5],u=e[6],c=e[7],l=e[8];return t[0]=i*l-s*c,t[1]=o*c-r*l,t[2]=r*s-o*i,t[3]=s*u-a*l,t[4]=n*l-o*u,t[5]=o*a-n*s,t[6]=a*c-i*u,t[7]=r*u-n*c,t[8]=n*i-r*a,t},determinant:function(t){var e=t[0],n=t[1],r=t[2],o=t[3],a=t[4],i=t[5],s=t[6],u=t[7],c=t[8];return e*(c*a-i*u)+n*(-c*o+i*s)+r*(u*o-a*s)},multiply:C,translate:function(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],s=e[4],u=e[5],c=e[6],l=e[7],d=e[8],f=n[0],h=n[1];return t[0]=r,t[1]=o,t[2]=a,t[3]=i,t[4]=s,t[5]=u,t[6]=f*r+h*i+c,t[7]=f*o+h*s+l,t[8]=f*a+h*u+d,t},rotate:function(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],s=e[4],u=e[5],c=e[6],l=e[7],d=e[8],f=Math.sin(n),h=Math.cos(n);return t[0]=h*r+f*i,t[1]=h*o+f*s,t[2]=h*a+f*u,t[3]=h*i-f*r,t[4]=h*s-f*o,t[5]=h*u-f*a,t[6]=c,t[7]=l,t[8]=d,t},scale:function(t,e,n){var r=n[0],o=n[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=o*e[3],t[4]=o*e[4],t[5]=o*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},fromTranslation:function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t},fromRotation:function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},fromScaling:function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},fromMat2d:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t},fromQuat:function(t,e){var n=e[0],r=e[1],o=e[2],a=e[3],i=n+n,s=r+r,u=o+o,c=n*i,l=r*i,d=r*s,f=o*i,h=o*s,p=o*u,_=a*i,m=a*s,v=a*u;return t[0]=1-d-p,t[3]=l-v,t[6]=f+m,t[1]=l+v,t[4]=1-c-p,t[7]=h-_,t[2]=f-m,t[5]=h+_,t[8]=1-c-d,t},normalFromMat4:function(t,e){var n=e[0],r=e[1],o=e[2],a=e[3],i=e[4],s=e[5],u=e[6],c=e[7],l=e[8],d=e[9],f=e[10],h=e[11],p=e[12],_=e[13],m=e[14],v=e[15],b=n*s-r*i,g=n*u-o*i,y=n*c-a*i,M=r*u-o*s,x=r*c-a*s,w=o*c-a*u,A=l*_-d*p,E=l*m-f*p,S=l*v-h*p,C=d*m-f*_,O=d*v-h*_,k=f*v-h*m,R=b*k-g*O+y*C+M*S-x*E+w*A;return R?(R=1/R,t[0]=(s*k-u*O+c*C)*R,t[1]=(u*S-i*k-c*E)*R,t[2]=(i*O-s*S+c*A)*R,t[3]=(o*O-r*k-a*C)*R,t[4]=(n*k-o*S+a*E)*R,t[5]=(r*S-n*O-a*A)*R,t[6]=(_*w-m*x+v*M)*R,t[7]=(m*y-p*w-v*g)*R,t[8]=(p*x-_*y+v*b)*R,t):null},projection:function(t,e,n){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/n,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},str:function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},frob:function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])},add:function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t},subtract:O,multiplyScalar:function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t},multiplyScalarAndAdd:function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t},exactEquals:function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]},equals:function(t,e){var n=t[0],r=t[1],o=t[2],a=t[3],i=t[4],s=t[5],u=t[6],c=t[7],l=t[8],f=e[0],h=e[1],p=e[2],_=e[3],m=e[4],v=e[5],b=e[6],g=e[7],y=e[8];return Math.abs(n-f)<=d*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(r-h)<=d*Math.max(1,Math.abs(r),Math.abs(h))&&Math.abs(o-p)<=d*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(a-_)<=d*Math.max(1,Math.abs(a),Math.abs(_))&&Math.abs(i-m)<=d*Math.max(1,Math.abs(i),Math.abs(m))&&Math.abs(s-v)<=d*Math.max(1,Math.abs(s),Math.abs(v))&&Math.abs(u-b)<=d*Math.max(1,Math.abs(u),Math.abs(b))&&Math.abs(c-g)<=d*Math.max(1,Math.abs(c),Math.abs(g))&&Math.abs(l-y)<=d*Math.max(1,Math.abs(l),Math.abs(y))},mul:k,sub:R});function T(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function z(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],s=e[4],u=e[5],c=e[6],l=e[7],d=e[8],f=e[9],h=e[10],p=e[11],_=e[12],m=e[13],v=e[14],b=e[15],g=n[0],y=n[1],M=n[2],x=n[3];return t[0]=g*r+y*s+M*d+x*_,t[1]=g*o+y*u+M*f+x*m,t[2]=g*a+y*c+M*h+x*v,t[3]=g*i+y*l+M*p+x*b,g=n[4],y=n[5],M=n[6],x=n[7],t[4]=g*r+y*s+M*d+x*_,t[5]=g*o+y*u+M*f+x*m,t[6]=g*a+y*c+M*h+x*v,t[7]=g*i+y*l+M*p+x*b,g=n[8],y=n[9],M=n[10],x=n[11],t[8]=g*r+y*s+M*d+x*_,t[9]=g*o+y*u+M*f+x*m,t[10]=g*a+y*c+M*h+x*v,t[11]=g*i+y*l+M*p+x*b,g=n[12],y=n[13],M=n[14],x=n[15],t[12]=g*r+y*s+M*d+x*_,t[13]=g*o+y*u+M*f+x*m,t[14]=g*a+y*c+M*h+x*v,t[15]=g*i+y*l+M*p+x*b,t}function F(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],s=r+r,u=o+o,c=a+a,l=r*s,d=r*u,f=r*c,h=o*u,p=o*c,_=a*c,m=i*s,v=i*u,b=i*c;return t[0]=1-(h+_),t[1]=d+b,t[2]=f-v,t[3]=0,t[4]=d-b,t[5]=1-(l+_),t[6]=p+m,t[7]=0,t[8]=f+v,t[9]=p-m,t[10]=1-(l+h),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function L(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function B(t,e){var n=e[0],r=e[1],o=e[2],a=e[4],i=e[5],s=e[6],u=e[8],c=e[9],l=e[10];return t[0]=Math.hypot(n,r,o),t[1]=Math.hypot(a,i,s),t[2]=Math.hypot(u,c,l),t}function D(t,e){var n=new f(3);B(n,e);var r=1/n[0],o=1/n[1],a=1/n[2],i=e[0]*r,s=e[1]*o,u=e[2]*a,c=e[4]*r,l=e[5]*o,d=e[6]*a,h=e[8]*r,p=e[9]*o,_=e[10]*a,m=i+l+_,v=0;return m>0?(v=2*Math.sqrt(m+1),t[3]=.25*v,t[0]=(d-p)/v,t[1]=(h-u)/v,t[2]=(s-c)/v):i>l&&i>_?(v=2*Math.sqrt(1+i-l-_),t[3]=(d-p)/v,t[0]=.25*v,t[1]=(s+c)/v,t[2]=(h+u)/v):l>_?(v=2*Math.sqrt(1+l-i-_),t[3]=(h-u)/v,t[0]=(s+c)/v,t[1]=.25*v,t[2]=(d+p)/v):(v=2*Math.sqrt(1+_-i-l),t[3]=(s-c)/v,t[0]=(h+u)/v,t[1]=(d+p)/v,t[2]=.25*v),t}function j(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}var I=z,V=j,N=Object.freeze({__proto__:null,create:function(){var t=new f(16);return f!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},clone:function(t){var e=new f(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},copy:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},fromValues:function(t,e,n,r,o,a,i,s,u,c,l,d,h,p,_,m){var v=new f(16);return v[0]=t,v[1]=e,v[2]=n,v[3]=r,v[4]=o,v[5]=a,v[6]=i,v[7]=s,v[8]=u,v[9]=c,v[10]=l,v[11]=d,v[12]=h,v[13]=p,v[14]=_,v[15]=m,v},set:function(t,e,n,r,o,a,i,s,u,c,l,d,f,h,p,_,m){return t[0]=e,t[1]=n,t[2]=r,t[3]=o,t[4]=a,t[5]=i,t[6]=s,t[7]=u,t[8]=c,t[9]=l,t[10]=d,t[11]=f,t[12]=h,t[13]=p,t[14]=_,t[15]=m,t},identity:T,transpose:function(t,e){if(t===e){var n=e[1],r=e[2],o=e[3],a=e[6],i=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=a,t[11]=e[14],t[12]=o,t[13]=i,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t},invert:function(t,e){var n=e[0],r=e[1],o=e[2],a=e[3],i=e[4],s=e[5],u=e[6],c=e[7],l=e[8],d=e[9],f=e[10],h=e[11],p=e[12],_=e[13],m=e[14],v=e[15],b=n*s-r*i,g=n*u-o*i,y=n*c-a*i,M=r*u-o*s,x=r*c-a*s,w=o*c-a*u,A=l*_-d*p,E=l*m-f*p,S=l*v-h*p,C=d*m-f*_,O=d*v-h*_,k=f*v-h*m,R=b*k-g*O+y*C+M*S-x*E+w*A;return R?(R=1/R,t[0]=(s*k-u*O+c*C)*R,t[1]=(o*O-r*k-a*C)*R,t[2]=(_*w-m*x+v*M)*R,t[3]=(f*x-d*w-h*M)*R,t[4]=(u*S-i*k-c*E)*R,t[5]=(n*k-o*S+a*E)*R,t[6]=(m*y-p*w-v*g)*R,t[7]=(l*w-f*y+h*g)*R,t[8]=(i*O-s*S+c*A)*R,t[9]=(r*S-n*O-a*A)*R,t[10]=(p*x-_*y+v*b)*R,t[11]=(d*y-l*x-h*b)*R,t[12]=(s*E-i*C-u*A)*R,t[13]=(n*C-r*E+o*A)*R,t[14]=(_*g-p*M-m*b)*R,t[15]=(l*M-d*g+f*b)*R,t):null},adjoint:function(t,e){var n=e[0],r=e[1],o=e[2],a=e[3],i=e[4],s=e[5],u=e[6],c=e[7],l=e[8],d=e[9],f=e[10],h=e[11],p=e[12],_=e[13],m=e[14],v=e[15];return t[0]=s*(f*v-h*m)-d*(u*v-c*m)+_*(u*h-c*f),t[1]=-(r*(f*v-h*m)-d*(o*v-a*m)+_*(o*h-a*f)),t[2]=r*(u*v-c*m)-s*(o*v-a*m)+_*(o*c-a*u),t[3]=-(r*(u*h-c*f)-s*(o*h-a*f)+d*(o*c-a*u)),t[4]=-(i*(f*v-h*m)-l*(u*v-c*m)+p*(u*h-c*f)),t[5]=n*(f*v-h*m)-l*(o*v-a*m)+p*(o*h-a*f),t[6]=-(n*(u*v-c*m)-i*(o*v-a*m)+p*(o*c-a*u)),t[7]=n*(u*h-c*f)-i*(o*h-a*f)+l*(o*c-a*u),t[8]=i*(d*v-h*_)-l*(s*v-c*_)+p*(s*h-c*d),t[9]=-(n*(d*v-h*_)-l*(r*v-a*_)+p*(r*h-a*d)),t[10]=n*(s*v-c*_)-i*(r*v-a*_)+p*(r*c-a*s),t[11]=-(n*(s*h-c*d)-i*(r*h-a*d)+l*(r*c-a*s)),t[12]=-(i*(d*m-f*_)-l*(s*m-u*_)+p*(s*f-u*d)),t[13]=n*(d*m-f*_)-l*(r*m-o*_)+p*(r*f-o*d),t[14]=-(n*(s*m-u*_)-i*(r*m-o*_)+p*(r*u-o*s)),t[15]=n*(s*f-u*d)-i*(r*f-o*d)+l*(r*u-o*s),t},determinant:function(t){var e=t[0],n=t[1],r=t[2],o=t[3],a=t[4],i=t[5],s=t[6],u=t[7],c=t[8],l=t[9],d=t[10],f=t[11],h=t[12],p=t[13],_=t[14],m=t[15];return(e*i-n*a)*(d*m-f*_)-(e*s-r*a)*(l*m-f*p)+(e*u-o*a)*(l*_-d*p)+(n*s-r*i)*(c*m-f*h)-(n*u-o*i)*(c*_-d*h)+(r*u-o*s)*(c*p-l*h)},multiply:z,translate:function(t,e,n){var r,o,a,i,s,u,c,l,d,f,h,p,_=n[0],m=n[1],v=n[2];return e===t?(t[12]=e[0]*_+e[4]*m+e[8]*v+e[12],t[13]=e[1]*_+e[5]*m+e[9]*v+e[13],t[14]=e[2]*_+e[6]*m+e[10]*v+e[14],t[15]=e[3]*_+e[7]*m+e[11]*v+e[15]):(r=e[0],o=e[1],a=e[2],i=e[3],s=e[4],u=e[5],c=e[6],l=e[7],d=e[8],f=e[9],h=e[10],p=e[11],t[0]=r,t[1]=o,t[2]=a,t[3]=i,t[4]=s,t[5]=u,t[6]=c,t[7]=l,t[8]=d,t[9]=f,t[10]=h,t[11]=p,t[12]=r*_+s*m+d*v+e[12],t[13]=o*_+u*m+f*v+e[13],t[14]=a*_+c*m+h*v+e[14],t[15]=i*_+l*m+p*v+e[15]),t},scale:function(t,e,n){var r=n[0],o=n[1],a=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*o,t[5]=e[5]*o,t[6]=e[6]*o,t[7]=e[7]*o,t[8]=e[8]*a,t[9]=e[9]*a,t[10]=e[10]*a,t[11]=e[11]*a,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},rotate:function(t,e,n,r){var o,a,i,s,u,c,l,f,h,p,_,m,v,b,g,y,M,x,w,A,E,S,C,O,k=r[0],R=r[1],P=r[2],T=Math.hypot(k,R,P);return T<d?null:(k*=T=1/T,R*=T,P*=T,o=Math.sin(n),i=1-(a=Math.cos(n)),s=e[0],u=e[1],c=e[2],l=e[3],f=e[4],h=e[5],p=e[6],_=e[7],m=e[8],v=e[9],b=e[10],g=e[11],y=k*k*i+a,M=R*k*i+P*o,x=P*k*i-R*o,w=k*R*i-P*o,A=R*R*i+a,E=P*R*i+k*o,S=k*P*i+R*o,C=R*P*i-k*o,O=P*P*i+a,t[0]=s*y+f*M+m*x,t[1]=u*y+h*M+v*x,t[2]=c*y+p*M+b*x,t[3]=l*y+_*M+g*x,t[4]=s*w+f*A+m*E,t[5]=u*w+h*A+v*E,t[6]=c*w+p*A+b*E,t[7]=l*w+_*A+g*E,t[8]=s*S+f*C+m*O,t[9]=u*S+h*C+v*O,t[10]=c*S+p*C+b*O,t[11]=l*S+_*C+g*O,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)},rotateX:function(t,e,n){var r=Math.sin(n),o=Math.cos(n),a=e[4],i=e[5],s=e[6],u=e[7],c=e[8],l=e[9],d=e[10],f=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=a*o+c*r,t[5]=i*o+l*r,t[6]=s*o+d*r,t[7]=u*o+f*r,t[8]=c*o-a*r,t[9]=l*o-i*r,t[10]=d*o-s*r,t[11]=f*o-u*r,t},rotateY:function(t,e,n){var r=Math.sin(n),o=Math.cos(n),a=e[0],i=e[1],s=e[2],u=e[3],c=e[8],l=e[9],d=e[10],f=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=a*o-c*r,t[1]=i*o-l*r,t[2]=s*o-d*r,t[3]=u*o-f*r,t[8]=a*r+c*o,t[9]=i*r+l*o,t[10]=s*r+d*o,t[11]=u*r+f*o,t},rotateZ:function(t,e,n){var r=Math.sin(n),o=Math.cos(n),a=e[0],i=e[1],s=e[2],u=e[3],c=e[4],l=e[5],d=e[6],f=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=a*o+c*r,t[1]=i*o+l*r,t[2]=s*o+d*r,t[3]=u*o+f*r,t[4]=c*o-a*r,t[5]=l*o-i*r,t[6]=d*o-s*r,t[7]=f*o-u*r,t},fromTranslation:function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},fromScaling:function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},fromRotation:function(t,e,n){var r,o,a,i=n[0],s=n[1],u=n[2],c=Math.hypot(i,s,u);return c<d?null:(i*=c=1/c,s*=c,u*=c,r=Math.sin(e),a=1-(o=Math.cos(e)),t[0]=i*i*a+o,t[1]=s*i*a+u*r,t[2]=u*i*a-s*r,t[3]=0,t[4]=i*s*a-u*r,t[5]=s*s*a+o,t[6]=u*s*a+i*r,t[7]=0,t[8]=i*u*a+s*r,t[9]=s*u*a-i*r,t[10]=u*u*a+o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},fromXRotation:function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},fromYRotation:function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},fromZRotation:function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},fromRotationTranslation:F,fromQuat2:function(t,e){var n=new f(3),r=-e[0],o=-e[1],a=-e[2],i=e[3],s=e[4],u=e[5],c=e[6],l=e[7],d=r*r+o*o+a*a+i*i;return d>0?(n[0]=2*(s*i+l*r+u*a-c*o)/d,n[1]=2*(u*i+l*o+c*r-s*a)/d,n[2]=2*(c*i+l*a+s*o-u*r)/d):(n[0]=2*(s*i+l*r+u*a-c*o),n[1]=2*(u*i+l*o+c*r-s*a),n[2]=2*(c*i+l*a+s*o-u*r)),F(t,e,n),t},getTranslation:L,getScaling:B,getRotation:D,fromRotationTranslationScale:function(t,e,n,r){var o=e[0],a=e[1],i=e[2],s=e[3],u=o+o,c=a+a,l=i+i,d=o*u,f=o*c,h=o*l,p=a*c,_=a*l,m=i*l,v=s*u,b=s*c,g=s*l,y=r[0],M=r[1],x=r[2];return t[0]=(1-(p+m))*y,t[1]=(f+g)*y,t[2]=(h-b)*y,t[3]=0,t[4]=(f-g)*M,t[5]=(1-(d+m))*M,t[6]=(_+v)*M,t[7]=0,t[8]=(h+b)*x,t[9]=(_-v)*x,t[10]=(1-(d+p))*x,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t},fromRotationTranslationScaleOrigin:function(t,e,n,r,o){var a=e[0],i=e[1],s=e[2],u=e[3],c=a+a,l=i+i,d=s+s,f=a*c,h=a*l,p=a*d,_=i*l,m=i*d,v=s*d,b=u*c,g=u*l,y=u*d,M=r[0],x=r[1],w=r[2],A=o[0],E=o[1],S=o[2],C=(1-(_+v))*M,O=(h+y)*M,k=(p-g)*M,R=(h-y)*x,P=(1-(f+v))*x,T=(m+b)*x,z=(p+g)*w,F=(m-b)*w,L=(1-(f+_))*w;return t[0]=C,t[1]=O,t[2]=k,t[3]=0,t[4]=R,t[5]=P,t[6]=T,t[7]=0,t[8]=z,t[9]=F,t[10]=L,t[11]=0,t[12]=n[0]+A-(C*A+R*E+z*S),t[13]=n[1]+E-(O*A+P*E+F*S),t[14]=n[2]+S-(k*A+T*E+L*S),t[15]=1,t},fromQuat:function(t,e){var n=e[0],r=e[1],o=e[2],a=e[3],i=n+n,s=r+r,u=o+o,c=n*i,l=r*i,d=r*s,f=o*i,h=o*s,p=o*u,_=a*i,m=a*s,v=a*u;return t[0]=1-d-p,t[1]=l+v,t[2]=f-m,t[3]=0,t[4]=l-v,t[5]=1-c-p,t[6]=h+_,t[7]=0,t[8]=f+m,t[9]=h-_,t[10]=1-c-d,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},frustum:function(t,e,n,r,o,a,i){var s=1/(n-e),u=1/(o-r),c=1/(a-i);return t[0]=2*a*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*a*u,t[6]=0,t[7]=0,t[8]=(n+e)*s,t[9]=(o+r)*u,t[10]=(i+a)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=i*a*2*c,t[15]=0,t},perspective:function(t,e,n,r,o){var a,i=1/Math.tan(e/2);return t[0]=i/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=o&&o!==1/0?(a=1/(r-o),t[10]=(o+r)*a,t[14]=2*o*r*a):(t[10]=-1,t[14]=-2*r),t},perspectiveFromFieldOfView:function(t,e,n,r){var o=Math.tan(e.upDegrees*Math.PI/180),a=Math.tan(e.downDegrees*Math.PI/180),i=Math.tan(e.leftDegrees*Math.PI/180),s=Math.tan(e.rightDegrees*Math.PI/180),u=2/(i+s),c=2/(o+a);return t[0]=u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-(i-s)*u*.5,t[9]=(o-a)*c*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t},ortho:function(t,e,n,r,o,a,i){var s=1/(e-n),u=1/(r-o),c=1/(a-i);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*s,t[13]=(o+r)*u,t[14]=(i+a)*c,t[15]=1,t},lookAt:function(t,e,n,r){var o,a,i,s,u,c,l,f,h,p,_=e[0],m=e[1],v=e[2],b=r[0],g=r[1],y=r[2],M=n[0],x=n[1],w=n[2];return Math.abs(_-M)<d&&Math.abs(m-x)<d&&Math.abs(v-w)<d?T(t):(l=_-M,f=m-x,h=v-w,o=g*(h*=p=1/Math.hypot(l,f,h))-y*(f*=p),a=y*(l*=p)-b*h,i=b*f-g*l,(p=Math.hypot(o,a,i))?(o*=p=1/p,a*=p,i*=p):(o=0,a=0,i=0),s=f*i-h*a,u=h*o-l*i,c=l*a-f*o,(p=Math.hypot(s,u,c))?(s*=p=1/p,u*=p,c*=p):(s=0,u=0,c=0),t[0]=o,t[1]=s,t[2]=l,t[3]=0,t[4]=a,t[5]=u,t[6]=f,t[7]=0,t[8]=i,t[9]=c,t[10]=h,t[11]=0,t[12]=-(o*_+a*m+i*v),t[13]=-(s*_+u*m+c*v),t[14]=-(l*_+f*m+h*v),t[15]=1,t)},targetTo:function(t,e,n,r){var o=e[0],a=e[1],i=e[2],s=r[0],u=r[1],c=r[2],l=o-n[0],d=a-n[1],f=i-n[2],h=l*l+d*d+f*f;h>0&&(l*=h=1/Math.sqrt(h),d*=h,f*=h);var p=u*f-c*d,_=c*l-s*f,m=s*d-u*l;return(h=p*p+_*_+m*m)>0&&(p*=h=1/Math.sqrt(h),_*=h,m*=h),t[0]=p,t[1]=_,t[2]=m,t[3]=0,t[4]=d*m-f*_,t[5]=f*p-l*m,t[6]=l*_-d*p,t[7]=0,t[8]=l,t[9]=d,t[10]=f,t[11]=0,t[12]=o,t[13]=a,t[14]=i,t[15]=1,t},str:function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},frob:function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])},add:function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t},subtract:j,multiplyScalar:function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t},multiplyScalarAndAdd:function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t[9]=e[9]+n[9]*r,t[10]=e[10]+n[10]*r,t[11]=e[11]+n[11]*r,t[12]=e[12]+n[12]*r,t[13]=e[13]+n[13]*r,t[14]=e[14]+n[14]*r,t[15]=e[15]+n[15]*r,t},exactEquals:function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]},equals:function(t,e){var n=t[0],r=t[1],o=t[2],a=t[3],i=t[4],s=t[5],u=t[6],c=t[7],l=t[8],f=t[9],h=t[10],p=t[11],_=t[12],m=t[13],v=t[14],b=t[15],g=e[0],y=e[1],M=e[2],x=e[3],w=e[4],A=e[5],E=e[6],S=e[7],C=e[8],O=e[9],k=e[10],R=e[11],P=e[12],T=e[13],z=e[14],F=e[15];return Math.abs(n-g)<=d*Math.max(1,Math.abs(n),Math.abs(g))&&Math.abs(r-y)<=d*Math.max(1,Math.abs(r),Math.abs(y))&&Math.abs(o-M)<=d*Math.max(1,Math.abs(o),Math.abs(M))&&Math.abs(a-x)<=d*Math.max(1,Math.abs(a),Math.abs(x))&&Math.abs(i-w)<=d*Math.max(1,Math.abs(i),Math.abs(w))&&Math.abs(s-A)<=d*Math.max(1,Math.abs(s),Math.abs(A))&&Math.abs(u-E)<=d*Math.max(1,Math.abs(u),Math.abs(E))&&Math.abs(c-S)<=d*Math.max(1,Math.abs(c),Math.abs(S))&&Math.abs(l-C)<=d*Math.max(1,Math.abs(l),Math.abs(C))&&Math.abs(f-O)<=d*Math.max(1,Math.abs(f),Math.abs(O))&&Math.abs(h-k)<=d*Math.max(1,Math.abs(h),Math.abs(k))&&Math.abs(p-R)<=d*Math.max(1,Math.abs(p),Math.abs(R))&&Math.abs(_-P)<=d*Math.max(1,Math.abs(_),Math.abs(P))&&Math.abs(m-T)<=d*Math.max(1,Math.abs(m),Math.abs(T))&&Math.abs(v-z)<=d*Math.max(1,Math.abs(v),Math.abs(z))&&Math.abs(b-F)<=d*Math.max(1,Math.abs(b),Math.abs(F))},mul:I,sub:V});function H(){var t=new f(3);return f!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function q(t){var e=t[0],n=t[1],r=t[2];return Math.hypot(e,n,r)}function U(t,e,n){var r=new f(3);return r[0]=t,r[1]=e,r[2]=n,r}function G(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function Y(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function X(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function Q(t,e){var n=e[0]-t[0],r=e[1]-t[1],o=e[2]-t[2];return Math.hypot(n,r,o)}function W(t,e){var n=e[0]-t[0],r=e[1]-t[1],o=e[2]-t[2];return n*n+r*r+o*o}function K(t){var e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r}function J(t,e){var n=e[0],r=e[1],o=e[2],a=n*n+r*r+o*o;return a>0&&(a=1/Math.sqrt(a)),t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a,t}function Z(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function $(t,e,n){var r=e[0],o=e[1],a=e[2],i=n[0],s=n[1],u=n[2];return t[0]=o*u-a*s,t[1]=a*i-r*u,t[2]=r*s-o*i,t}var tt,et=G,nt=Y,rt=X,ot=Q,at=W,it=q,st=K,ut=(tt=H(),function(t,e,n,r,o,a){var i,s;for(e||(e=3),n||(n=0),s=r?Math.min(r*e+n,t.length):t.length,i=n;i<s;i+=e)tt[0]=t[i],tt[1]=t[i+1],tt[2]=t[i+2],o(tt,tt,a),t[i]=tt[0],t[i+1]=tt[1],t[i+2]=tt[2];return t}),ct=Object.freeze({__proto__:null,create:H,clone:function(t){var e=new f(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},length:q,fromValues:U,copy:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},set:function(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t},add:function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t},subtract:G,multiply:Y,divide:X,ceil:function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t},floor:function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t},min:function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t},max:function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t},round:function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t},scale:function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t},scaleAndAdd:function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t},distance:Q,squaredDistance:W,squaredLength:K,negate:function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},inverse:function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t},normalize:J,dot:Z,cross:$,lerp:function(t,e,n,r){var o=e[0],a=e[1],i=e[2];return t[0]=o+r*(n[0]-o),t[1]=a+r*(n[1]-a),t[2]=i+r*(n[2]-i),t},hermite:function(t,e,n,r,o,a){var i=a*a,s=i*(2*a-3)+1,u=i*(a-2)+a,c=i*(a-1),l=i*(3-2*a);return t[0]=e[0]*s+n[0]*u+r[0]*c+o[0]*l,t[1]=e[1]*s+n[1]*u+r[1]*c+o[1]*l,t[2]=e[2]*s+n[2]*u+r[2]*c+o[2]*l,t},bezier:function(t,e,n,r,o,a){var i=1-a,s=i*i,u=a*a,c=s*i,l=3*a*s,d=3*u*i,f=u*a;return t[0]=e[0]*c+n[0]*l+r[0]*d+o[0]*f,t[1]=e[1]*c+n[1]*l+r[1]*d+o[1]*f,t[2]=e[2]*c+n[2]*l+r[2]*d+o[2]*f,t},random:function(t,e){e=e||1;var n=2*h()*Math.PI,r=2*h()-1,o=Math.sqrt(1-r*r)*e;return t[0]=Math.cos(n)*o,t[1]=Math.sin(n)*o,t[2]=r*e,t},transformMat4:function(t,e,n){var r=e[0],o=e[1],a=e[2],i=n[3]*r+n[7]*o+n[11]*a+n[15];return i=i||1,t[0]=(n[0]*r+n[4]*o+n[8]*a+n[12])/i,t[1]=(n[1]*r+n[5]*o+n[9]*a+n[13])/i,t[2]=(n[2]*r+n[6]*o+n[10]*a+n[14])/i,t},transformMat3:function(t,e,n){var r=e[0],o=e[1],a=e[2];return t[0]=r*n[0]+o*n[3]+a*n[6],t[1]=r*n[1]+o*n[4]+a*n[7],t[2]=r*n[2]+o*n[5]+a*n[8],t},transformQuat:function(t,e,n){var r=n[0],o=n[1],a=n[2],i=n[3],s=e[0],u=e[1],c=e[2],l=o*c-a*u,d=a*s-r*c,f=r*u-o*s,h=o*f-a*d,p=a*l-r*f,_=r*d-o*l,m=2*i;return l*=m,d*=m,f*=m,h*=2,p*=2,_*=2,t[0]=s+l+h,t[1]=u+d+p,t[2]=c+f+_,t},rotateX:function(t,e,n,r){var o=[],a=[];return o[0]=e[0]-n[0],o[1]=e[1]-n[1],o[2]=e[2]-n[2],a[0]=o[0],a[1]=o[1]*Math.cos(r)-o[2]*Math.sin(r),a[2]=o[1]*Math.sin(r)+o[2]*Math.cos(r),t[0]=a[0]+n[0],t[1]=a[1]+n[1],t[2]=a[2]+n[2],t},rotateY:function(t,e,n,r){var o=[],a=[];return o[0]=e[0]-n[0],o[1]=e[1]-n[1],o[2]=e[2]-n[2],a[0]=o[2]*Math.sin(r)+o[0]*Math.cos(r),a[1]=o[1],a[2]=o[2]*Math.cos(r)-o[0]*Math.sin(r),t[0]=a[0]+n[0],t[1]=a[1]+n[1],t[2]=a[2]+n[2],t},rotateZ:function(t,e,n,r){var o=[],a=[];return o[0]=e[0]-n[0],o[1]=e[1]-n[1],o[2]=e[2]-n[2],a[0]=o[0]*Math.cos(r)-o[1]*Math.sin(r),a[1]=o[0]*Math.sin(r)+o[1]*Math.cos(r),a[2]=o[2],t[0]=a[0]+n[0],t[1]=a[1]+n[1],t[2]=a[2]+n[2],t},angle:function(t,e){var n=t[0],r=t[1],o=t[2],a=e[0],i=e[1],s=e[2],u=Math.sqrt(n*n+r*r+o*o)*Math.sqrt(a*a+i*i+s*s),c=u&&Z(t,e)/u;return Math.acos(Math.min(Math.max(c,-1),1))},zero:function(t){return t[0]=0,t[1]=0,t[2]=0,t},str:function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},exactEquals:function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]},equals:function(t,e){var n=t[0],r=t[1],o=t[2],a=e[0],i=e[1],s=e[2];return Math.abs(n-a)<=d*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-i)<=d*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(o-s)<=d*Math.max(1,Math.abs(o),Math.abs(s))},sub:et,mul:nt,div:rt,dist:ot,sqrDist:at,len:it,sqrLen:st,forEach:ut});function lt(){var t=new f(4);return f!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function dt(t){var e=new f(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function ft(t,e,n,r){var o=new f(4);return o[0]=t,o[1]=e,o[2]=n,o[3]=r,o}function ht(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function pt(t,e,n,r,o){return t[0]=e,t[1]=n,t[2]=r,t[3]=o,t}function _t(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function mt(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function vt(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t}function bt(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t[3]=e[3]/n[3],t}function gt(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function yt(t,e){var n=e[0]-t[0],r=e[1]-t[1],o=e[2]-t[2],a=e[3]-t[3];return Math.hypot(n,r,o,a)}function Mt(t,e){var n=e[0]-t[0],r=e[1]-t[1],o=e[2]-t[2],a=e[3]-t[3];return n*n+r*r+o*o+a*a}function xt(t){var e=t[0],n=t[1],r=t[2],o=t[3];return Math.hypot(e,n,r,o)}function wt(t){var e=t[0],n=t[1],r=t[2],o=t[3];return e*e+n*n+r*r+o*o}function At(t,e){var n=e[0],r=e[1],o=e[2],a=e[3],i=n*n+r*r+o*o+a*a;return i>0&&(i=1/Math.sqrt(i)),t[0]=n*i,t[1]=r*i,t[2]=o*i,t[3]=a*i,t}function Et(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function St(t,e,n,r){var o=e[0],a=e[1],i=e[2],s=e[3];return t[0]=o+r*(n[0]-o),t[1]=a+r*(n[1]-a),t[2]=i+r*(n[2]-i),t[3]=s+r*(n[3]-s),t}function Ct(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function Ot(t,e){var n=t[0],r=t[1],o=t[2],a=t[3],i=e[0],s=e[1],u=e[2],c=e[3];return Math.abs(n-i)<=d*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(r-s)<=d*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(o-u)<=d*Math.max(1,Math.abs(o),Math.abs(u))&&Math.abs(a-c)<=d*Math.max(1,Math.abs(a),Math.abs(c))}var kt=mt,Rt=vt,Pt=bt,Tt=yt,zt=Mt,Ft=xt,Lt=wt,Bt=function(){var t=lt();return function(e,n,r,o,a,i){var s,u;for(n||(n=4),r||(r=0),u=o?Math.min(o*n+r,e.length):e.length,s=r;s<u;s+=n)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],t[3]=e[s+3],a(t,t,i),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2],e[s+3]=t[3];return e}}(),Dt=Object.freeze({__proto__:null,create:lt,clone:dt,fromValues:ft,copy:ht,set:pt,add:_t,subtract:mt,multiply:vt,divide:bt,ceil:function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t},floor:function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t},min:function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t[3]=Math.min(e[3],n[3]),t},max:function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t[3]=Math.max(e[3],n[3]),t},round:function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t},scale:gt,scaleAndAdd:function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t},distance:yt,squaredDistance:Mt,length:xt,squaredLength:wt,negate:function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},inverse:function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t},normalize:At,dot:Et,cross:function(t,e,n,r){var o=n[0]*r[1]-n[1]*r[0],a=n[0]*r[2]-n[2]*r[0],i=n[0]*r[3]-n[3]*r[0],s=n[1]*r[2]-n[2]*r[1],u=n[1]*r[3]-n[3]*r[1],c=n[2]*r[3]-n[3]*r[2],l=e[0],d=e[1],f=e[2],h=e[3];return t[0]=d*c-f*u+h*s,t[1]=-l*c+f*i-h*a,t[2]=l*u-d*i+h*o,t[3]=-l*s+d*a-f*o,t},lerp:St,random:function(t,e){var n,r,o,a,i,s;e=e||1;do{i=(n=2*h()-1)*n+(r=2*h()-1)*r}while(i>=1);do{s=(o=2*h()-1)*o+(a=2*h()-1)*a}while(s>=1);var u=Math.sqrt((1-i)/s);return t[0]=e*n,t[1]=e*r,t[2]=e*o*u,t[3]=e*a*u,t},transformMat4:function(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3];return t[0]=n[0]*r+n[4]*o+n[8]*a+n[12]*i,t[1]=n[1]*r+n[5]*o+n[9]*a+n[13]*i,t[2]=n[2]*r+n[6]*o+n[10]*a+n[14]*i,t[3]=n[3]*r+n[7]*o+n[11]*a+n[15]*i,t},transformQuat:function(t,e,n){var r=e[0],o=e[1],a=e[2],i=n[0],s=n[1],u=n[2],c=n[3],l=c*r+s*a-u*o,d=c*o+u*r-i*a,f=c*a+i*o-s*r,h=-i*r-s*o-u*a;return t[0]=l*c+h*-i+d*-u-f*-s,t[1]=d*c+h*-s+f*-i-l*-u,t[2]=f*c+h*-u+l*-s-d*-i,t[3]=e[3],t},zero:function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},str:function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},exactEquals:Ct,equals:Ot,sub:kt,mul:Rt,div:Pt,dist:Tt,sqrDist:zt,len:Ft,sqrLen:Lt,forEach:Bt});function jt(){var t=new f(4);return f!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function It(t,e,n){n*=.5;var r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}function Vt(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],s=n[0],u=n[1],c=n[2],l=n[3];return t[0]=r*l+i*s+o*c-a*u,t[1]=o*l+i*u+a*s-r*c,t[2]=a*l+i*c+r*u-o*s,t[3]=i*l-r*s-o*u-a*c,t}function Nt(t,e,n){n*=.5;var r=e[0],o=e[1],a=e[2],i=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+i*s,t[1]=o*u+a*s,t[2]=a*u-o*s,t[3]=i*u-r*s,t}function Ht(t,e,n){n*=.5;var r=e[0],o=e[1],a=e[2],i=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u-a*s,t[1]=o*u+i*s,t[2]=a*u+r*s,t[3]=i*u-o*s,t}function qt(t,e,n){n*=.5;var r=e[0],o=e[1],a=e[2],i=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+o*s,t[1]=o*u-r*s,t[2]=a*u+i*s,t[3]=i*u-a*s,t}function Ut(t,e){var n=e[0],r=e[1],o=e[2],a=e[3],i=Math.sqrt(n*n+r*r+o*o),s=Math.exp(a),u=i>0?s*Math.sin(i)/i:0;return t[0]=n*u,t[1]=r*u,t[2]=o*u,t[3]=s*Math.cos(i),t}function Gt(t,e){var n=e[0],r=e[1],o=e[2],a=e[3],i=Math.sqrt(n*n+r*r+o*o),s=i>0?Math.atan2(i,a)/i:0;return t[0]=n*s,t[1]=r*s,t[2]=o*s,t[3]=.5*Math.log(n*n+r*r+o*o+a*a),t}function Yt(t,e,n,r){var o,a,i,s,u,c=e[0],l=e[1],f=e[2],h=e[3],p=n[0],_=n[1],m=n[2],v=n[3];return(a=c*p+l*_+f*m+h*v)<0&&(a=-a,p=-p,_=-_,m=-m,v=-v),1-a>d?(o=Math.acos(a),i=Math.sin(o),s=Math.sin((1-r)*o)/i,u=Math.sin(r*o)/i):(s=1-r,u=r),t[0]=s*c+u*p,t[1]=s*l+u*_,t[2]=s*f+u*m,t[3]=s*h+u*v,t}function Xt(t,e){var n,r=e[0]+e[4]+e[8];if(r>0)n=Math.sqrt(r+1),t[3]=.5*n,n=.5/n,t[0]=(e[5]-e[7])*n,t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{var o=0;e[4]>e[0]&&(o=1),e[8]>e[3*o+o]&&(o=2);var a=(o+1)%3,i=(o+2)%3;n=Math.sqrt(e[3*o+o]-e[3*a+a]-e[3*i+i]+1),t[o]=.5*n,n=.5/n,t[3]=(e[3*a+i]-e[3*i+a])*n,t[a]=(e[3*a+o]+e[3*o+a])*n,t[i]=(e[3*i+o]+e[3*o+i])*n}return t}var Qt,Wt,Kt,Jt,Zt,$t,te=dt,ee=ft,ne=ht,re=pt,oe=_t,ae=Vt,ie=gt,se=Et,ue=St,ce=xt,le=ce,de=wt,fe=de,he=At,pe=Ct,_e=Ot,me=(Qt=H(),Wt=U(1,0,0),Kt=U(0,1,0),function(t,e,n){var r=Z(e,n);return r<-.999999?($(Qt,Wt,e),it(Qt)<1e-6&&$(Qt,Kt,e),J(Qt,Qt),It(t,Qt,Math.PI),t):r>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):($(Qt,e,n),t[0]=Qt[0],t[1]=Qt[1],t[2]=Qt[2],t[3]=1+r,he(t,t))}),ve=(Jt=jt(),Zt=jt(),function(t,e,n,r,o,a){return Yt(Jt,e,o,a),Yt(Zt,n,r,a),Yt(t,Jt,Zt,2*a*(1-a)),t}),be=($t=S(),function(t,e,n,r){return $t[0]=n[0],$t[3]=n[1],$t[6]=n[2],$t[1]=r[0],$t[4]=r[1],$t[7]=r[2],$t[2]=-e[0],$t[5]=-e[1],$t[8]=-e[2],he(t,Xt(t,$t))}),ge=Object.freeze({__proto__:null,create:jt,identity:function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},setAxisAngle:It,getAxisAngle:function(t,e){var n=2*Math.acos(e[3]),r=Math.sin(n/2);return r>d?(t[0]=e[0]/r,t[1]=e[1]/r,t[2]=e[2]/r):(t[0]=1,t[1]=0,t[2]=0),n},getAngle:function(t,e){var n=se(t,e);return Math.acos(2*n*n-1)},multiply:Vt,rotateX:Nt,rotateY:Ht,rotateZ:qt,calculateW:function(t,e){var n=e[0],r=e[1],o=e[2];return t[0]=n,t[1]=r,t[2]=o,t[3]=Math.sqrt(Math.abs(1-n*n-r*r-o*o)),t},exp:Ut,ln:Gt,pow:function(t,e,n){return Gt(t,e),ie(t,t,n),Ut(t,t),t},slerp:Yt,random:function(t){var e=h(),n=h(),r=h(),o=Math.sqrt(1-e),a=Math.sqrt(e);return t[0]=o*Math.sin(2*Math.PI*n),t[1]=o*Math.cos(2*Math.PI*n),t[2]=a*Math.sin(2*Math.PI*r),t[3]=a*Math.cos(2*Math.PI*r),t},invert:function(t,e){var n=e[0],r=e[1],o=e[2],a=e[3],i=n*n+r*r+o*o+a*a,s=i?1/i:0;return t[0]=-n*s,t[1]=-r*s,t[2]=-o*s,t[3]=a*s,t},conjugate:function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t},fromMat3:Xt,fromEuler:function(t,e,n,r){var o=.5*Math.PI/180;e*=o,n*=o,r*=o;var a=Math.sin(e),i=Math.cos(e),s=Math.sin(n),u=Math.cos(n),c=Math.sin(r),l=Math.cos(r);return t[0]=a*u*l-i*s*c,t[1]=i*s*l+a*u*c,t[2]=i*u*c-a*s*l,t[3]=i*u*l+a*s*c,t},str:function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},clone:te,fromValues:ee,copy:ne,set:re,add:oe,mul:ae,scale:ie,dot:se,lerp:ue,length:ce,len:le,squaredLength:de,sqrLen:fe,normalize:he,exactEquals:pe,equals:_e,rotationTo:me,sqlerp:ve,setAxes:be});function ye(t,e,n){var r=.5*n[0],o=.5*n[1],a=.5*n[2],i=e[0],s=e[1],u=e[2],c=e[3];return t[0]=i,t[1]=s,t[2]=u,t[3]=c,t[4]=r*c+o*u-a*s,t[5]=o*c+a*i-r*u,t[6]=a*c+r*s-o*i,t[7]=-r*i-o*s-a*u,t}function Me(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t}var xe=ne;var we=ne;function Ae(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],s=n[4],u=n[5],c=n[6],l=n[7],d=e[4],f=e[5],h=e[6],p=e[7],_=n[0],m=n[1],v=n[2],b=n[3];return t[0]=r*b+i*_+o*v-a*m,t[1]=o*b+i*m+a*_-r*v,t[2]=a*b+i*v+r*m-o*_,t[3]=i*b-r*_-o*m-a*v,t[4]=r*l+i*s+o*c-a*u+d*b+p*_+f*v-h*m,t[5]=o*l+i*u+a*s-r*c+f*b+p*m+h*_-d*v,t[6]=a*l+i*c+r*u-o*s+h*b+p*v+d*m-f*_,t[7]=i*l-r*s-o*u-a*c+p*b-d*_-f*m-h*v,t}var Ee=Ae;var Se=se;var Ce=ce,Oe=Ce,ke=de,Re=ke;var Pe=Object.freeze({__proto__:null,create:function(){var t=new f(8);return f!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t},clone:function(t){var e=new f(8);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e},fromValues:function(t,e,n,r,o,a,i,s){var u=new f(8);return u[0]=t,u[1]=e,u[2]=n,u[3]=r,u[4]=o,u[5]=a,u[6]=i,u[7]=s,u},fromRotationTranslationValues:function(t,e,n,r,o,a,i){var s=new f(8);s[0]=t,s[1]=e,s[2]=n,s[3]=r;var u=.5*o,c=.5*a,l=.5*i;return s[4]=u*r+c*n-l*e,s[5]=c*r+l*t-u*n,s[6]=l*r+u*e-c*t,s[7]=-u*t-c*e-l*n,s},fromRotationTranslation:ye,fromTranslation:function(t,e){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*e[0],t[5]=.5*e[1],t[6]=.5*e[2],t[7]=0,t},fromRotation:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},fromMat4:function(t,e){var n=jt();D(n,e);var r=new f(3);return L(r,e),ye(t,n,r),t},copy:Me,identity:function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},set:function(t,e,n,r,o,a,i,s,u){return t[0]=e,t[1]=n,t[2]=r,t[3]=o,t[4]=a,t[5]=i,t[6]=s,t[7]=u,t},getReal:xe,getDual:function(t,e){return t[0]=e[4],t[1]=e[5],t[2]=e[6],t[3]=e[7],t},setReal:we,setDual:function(t,e){return t[4]=e[0],t[5]=e[1],t[6]=e[2],t[7]=e[3],t},getTranslation:function(t,e){var n=e[4],r=e[5],o=e[6],a=e[7],i=-e[0],s=-e[1],u=-e[2],c=e[3];return t[0]=2*(n*c+a*i+r*u-o*s),t[1]=2*(r*c+a*s+o*i-n*u),t[2]=2*(o*c+a*u+n*s-r*i),t},translate:function(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],s=.5*n[0],u=.5*n[1],c=.5*n[2],l=e[4],d=e[5],f=e[6],h=e[7];return t[0]=r,t[1]=o,t[2]=a,t[3]=i,t[4]=i*s+o*c-a*u+l,t[5]=i*u+a*s-r*c+d,t[6]=i*c+r*u-o*s+f,t[7]=-r*s-o*u-a*c+h,t},rotateX:function(t,e,n){var r=-e[0],o=-e[1],a=-e[2],i=e[3],s=e[4],u=e[5],c=e[6],l=e[7],d=s*i+l*r+u*a-c*o,f=u*i+l*o+c*r-s*a,h=c*i+l*a+s*o-u*r,p=l*i-s*r-u*o-c*a;return Nt(t,e,n),r=t[0],o=t[1],a=t[2],i=t[3],t[4]=d*i+p*r+f*a-h*o,t[5]=f*i+p*o+h*r-d*a,t[6]=h*i+p*a+d*o-f*r,t[7]=p*i-d*r-f*o-h*a,t},rotateY:function(t,e,n){var r=-e[0],o=-e[1],a=-e[2],i=e[3],s=e[4],u=e[5],c=e[6],l=e[7],d=s*i+l*r+u*a-c*o,f=u*i+l*o+c*r-s*a,h=c*i+l*a+s*o-u*r,p=l*i-s*r-u*o-c*a;return Ht(t,e,n),r=t[0],o=t[1],a=t[2],i=t[3],t[4]=d*i+p*r+f*a-h*o,t[5]=f*i+p*o+h*r-d*a,t[6]=h*i+p*a+d*o-f*r,t[7]=p*i-d*r-f*o-h*a,t},rotateZ:function(t,e,n){var r=-e[0],o=-e[1],a=-e[2],i=e[3],s=e[4],u=e[5],c=e[6],l=e[7],d=s*i+l*r+u*a-c*o,f=u*i+l*o+c*r-s*a,h=c*i+l*a+s*o-u*r,p=l*i-s*r-u*o-c*a;return qt(t,e,n),r=t[0],o=t[1],a=t[2],i=t[3],t[4]=d*i+p*r+f*a-h*o,t[5]=f*i+p*o+h*r-d*a,t[6]=h*i+p*a+d*o-f*r,t[7]=p*i-d*r-f*o-h*a,t},rotateByQuatAppend:function(t,e,n){var r=n[0],o=n[1],a=n[2],i=n[3],s=e[0],u=e[1],c=e[2],l=e[3];return t[0]=s*i+l*r+u*a-c*o,t[1]=u*i+l*o+c*r-s*a,t[2]=c*i+l*a+s*o-u*r,t[3]=l*i-s*r-u*o-c*a,s=e[4],u=e[5],c=e[6],l=e[7],t[4]=s*i+l*r+u*a-c*o,t[5]=u*i+l*o+c*r-s*a,t[6]=c*i+l*a+s*o-u*r,t[7]=l*i-s*r-u*o-c*a,t},rotateByQuatPrepend:function(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],s=n[0],u=n[1],c=n[2],l=n[3];return t[0]=r*l+i*s+o*c-a*u,t[1]=o*l+i*u+a*s-r*c,t[2]=a*l+i*c+r*u-o*s,t[3]=i*l-r*s-o*u-a*c,s=n[4],u=n[5],c=n[6],l=n[7],t[4]=r*l+i*s+o*c-a*u,t[5]=o*l+i*u+a*s-r*c,t[6]=a*l+i*c+r*u-o*s,t[7]=i*l-r*s-o*u-a*c,t},rotateAroundAxis:function(t,e,n,r){if(Math.abs(r)<d)return Me(t,e);var o=Math.hypot(n[0],n[1],n[2]);r*=.5;var a=Math.sin(r),i=a*n[0]/o,s=a*n[1]/o,u=a*n[2]/o,c=Math.cos(r),l=e[0],f=e[1],h=e[2],p=e[3];t[0]=l*c+p*i+f*u-h*s,t[1]=f*c+p*s+h*i-l*u,t[2]=h*c+p*u+l*s-f*i,t[3]=p*c-l*i-f*s-h*u;var _=e[4],m=e[5],v=e[6],b=e[7];return t[4]=_*c+b*i+m*u-v*s,t[5]=m*c+b*s+v*i-_*u,t[6]=v*c+b*u+_*s-m*i,t[7]=b*c-_*i-m*s-v*u,t},add:function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t},multiply:Ae,mul:Ee,scale:function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t},dot:Se,lerp:function(t,e,n,r){var o=1-r;return Se(e,n)<0&&(r=-r),t[0]=e[0]*o+n[0]*r,t[1]=e[1]*o+n[1]*r,t[2]=e[2]*o+n[2]*r,t[3]=e[3]*o+n[3]*r,t[4]=e[4]*o+n[4]*r,t[5]=e[5]*o+n[5]*r,t[6]=e[6]*o+n[6]*r,t[7]=e[7]*o+n[7]*r,t},invert:function(t,e){var n=ke(e);return t[0]=-e[0]/n,t[1]=-e[1]/n,t[2]=-e[2]/n,t[3]=e[3]/n,t[4]=-e[4]/n,t[5]=-e[5]/n,t[6]=-e[6]/n,t[7]=e[7]/n,t},conjugate:function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=e[7],t},length:Ce,len:Oe,squaredLength:ke,sqrLen:Re,normalize:function(t,e){var n=ke(e);if(n>0){n=Math.sqrt(n);var r=e[0]/n,o=e[1]/n,a=e[2]/n,i=e[3]/n,s=e[4],u=e[5],c=e[6],l=e[7],d=r*s+o*u+a*c+i*l;t[0]=r,t[1]=o,t[2]=a,t[3]=i,t[4]=(s-r*d)/n,t[5]=(u-o*d)/n,t[6]=(c-a*d)/n,t[7]=(l-i*d)/n}return t},str:function(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"},exactEquals:function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]},equals:function(t,e){var n=t[0],r=t[1],o=t[2],a=t[3],i=t[4],s=t[5],u=t[6],c=t[7],l=e[0],f=e[1],h=e[2],p=e[3],_=e[4],m=e[5],v=e[6],b=e[7];return Math.abs(n-l)<=d*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(r-f)<=d*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(o-h)<=d*Math.max(1,Math.abs(o),Math.abs(h))&&Math.abs(a-p)<=d*Math.max(1,Math.abs(a),Math.abs(p))&&Math.abs(i-_)<=d*Math.max(1,Math.abs(i),Math.abs(_))&&Math.abs(s-m)<=d*Math.max(1,Math.abs(s),Math.abs(m))&&Math.abs(u-v)<=d*Math.max(1,Math.abs(u),Math.abs(v))&&Math.abs(c-b)<=d*Math.max(1,Math.abs(c),Math.abs(b))}});function Te(){var t=new f(2);return f!=Float32Array&&(t[0]=0,t[1]=0),t}function ze(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function Fe(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t}function Le(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t}function Be(t,e){var n=e[0]-t[0],r=e[1]-t[1];return Math.hypot(n,r)}function De(t,e){var n=e[0]-t[0],r=e[1]-t[1];return n*n+r*r}function je(t){var e=t[0],n=t[1];return Math.hypot(e,n)}function Ie(t){var e=t[0],n=t[1];return e*e+n*n}var Ve=je,Ne=ze,He=Fe,qe=Le,Ue=Be,Ge=De,Ye=Ie,Xe=function(){var t=Te();return function(e,n,r,o,a,i){var s,u;for(n||(n=2),r||(r=0),u=o?Math.min(o*n+r,e.length):e.length,s=r;s<u;s+=n)t[0]=e[s],t[1]=e[s+1],a(t,t,i),e[s]=t[0],e[s+1]=t[1];return e}}(),Qe=Object.freeze({__proto__:null,create:Te,clone:function(t){var e=new f(2);return e[0]=t[0],e[1]=t[1],e},fromValues:function(t,e){var n=new f(2);return n[0]=t,n[1]=e,n},copy:function(t,e){return t[0]=e[0],t[1]=e[1],t},set:function(t,e,n){return t[0]=e,t[1]=n,t},add:function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t},subtract:ze,multiply:Fe,divide:Le,ceil:function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t},floor:function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t},min:function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t},max:function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t},round:function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t},scale:function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t},scaleAndAdd:function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t},distance:Be,squaredDistance:De,length:je,squaredLength:Ie,negate:function(t,e){return t[0]=-e[0],t[1]=-e[1],t},inverse:function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t},normalize:function(t,e){var n=e[0],r=e[1],o=n*n+r*r;return o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t},dot:function(t,e){return t[0]*e[0]+t[1]*e[1]},cross:function(t,e,n){var r=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=r,t},lerp:function(t,e,n,r){var o=e[0],a=e[1];return t[0]=o+r*(n[0]-o),t[1]=a+r*(n[1]-a),t},random:function(t,e){e=e||1;var n=2*h()*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t},transformMat2:function(t,e,n){var r=e[0],o=e[1];return t[0]=n[0]*r+n[2]*o,t[1]=n[1]*r+n[3]*o,t},transformMat2d:function(t,e,n){var r=e[0],o=e[1];return t[0]=n[0]*r+n[2]*o+n[4],t[1]=n[1]*r+n[3]*o+n[5],t},transformMat3:function(t,e,n){var r=e[0],o=e[1];return t[0]=n[0]*r+n[3]*o+n[6],t[1]=n[1]*r+n[4]*o+n[7],t},transformMat4:function(t,e,n){var r=e[0],o=e[1];return t[0]=n[0]*r+n[4]*o+n[12],t[1]=n[1]*r+n[5]*o+n[13],t},rotate:function(t,e,n,r){var o=e[0]-n[0],a=e[1]-n[1],i=Math.sin(r),s=Math.cos(r);return t[0]=o*s-a*i+n[0],t[1]=o*i+a*s+n[1],t},angle:function(t,e){var n=t[0],r=t[1],o=e[0],a=e[1],i=Math.sqrt(n*n+r*r)*Math.sqrt(o*o+a*a),s=i&&(n*o+r*a)/i;return Math.acos(Math.min(Math.max(s,-1),1))},zero:function(t){return t[0]=0,t[1]=0,t},str:function(t){return"vec2("+t[0]+", "+t[1]+")"},exactEquals:function(t,e){return t[0]===e[0]&&t[1]===e[1]},equals:function(t,e){var n=t[0],r=t[1],o=e[0],a=e[1];return Math.abs(n-o)<=d*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-a)<=d*Math.max(1,Math.abs(r),Math.abs(a))},len:Ve,sub:Ne,mul:He,div:qe,dist:Ue,sqrDist:Ge,sqrLen:Ye,forEach:Xe}),We=Object.freeze({__proto__:null,glMatrix:_,mat2:y,mat2d:E,mat3:P,mat4:N,quat:ge,quat2:Pe,vec2:Qe,vec3:ct,vec4:Dt}),Ke=e((function(t,e){function n(t,e,n){var r=t.createShader(e);if(!r)return 0;if(t.shaderSource(r,n),t.compileShader(r),!t.getShaderParameter(r,t.COMPILE_STATUS)){var o=t.getShaderInfoLog(r);throw new Error(o||"")}return r}Object.defineProperty(e,"__esModule",{value:!0}),e.createShader=n,e.createProgram=function(t,e,r,o){var a="string"==typeof e?n(t,t.VERTEX_SHADER,e):e,i="string"==typeof r?n(t,t.FRAGMENT_SHADER,r):r,s=t.createProgram();if(!s||!a||!i)return 0;if(t.attachShader(s,a),t.attachShader(s,i),o&&t.transformFeedbackVaryings(s,o,t.INTERLEAVED_ATTRIBS),t.linkProgram(s),!t.getProgramParameter(s,t.LINK_STATUS))throw new Error("Failed to create shader program");return s}}));t(Ke);Ke.createShader,Ke.createProgram;var Je=Object.freeze({__proto__:null,default:"#version 300 es\nprecision mediump float;layout(location=0)in vec4 offset;uniform mat4 camera;uniform float size;void main(){vec3 pos=offset.xyz;gl_PointSize=size;gl_Position=camera*vec4(pos,1.0);}"}),Ze=Object.freeze({__proto__:null,default:"#version 300 es\nprecision mediump float;in vec2 v_uv;out vec4 FragColor;void main(){FragColor=vec4(1.0,0.0,0.0,1.0);}"}),$e=Object.freeze({__proto__:null,default:"#version 300 es\nprecision mediump float;layout(location=0)in vec4 data;layout(location=1)in vec4 initial;uniform vec4 sphere;out vec4 updated;vec3 mod289(vec3 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 mod289(vec4 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 permute(vec4 x){return mod289(((x*34.0)+1.0)*x);}vec4 taylorInvSqrt(vec4 r){return 1.79284291400159-0.85373472095314*r;}float snoise(vec3 v){const vec2 C=vec2(1.0/6.0,1.0/3.0);const vec4 D=vec4(0.0,0.5,1.0,2.0);vec3 i=floor(v+dot(v,C.yyy));vec3 x0=v-i+dot(i,C.xxx);vec3 g=step(x0.yzx,x0.xyz);vec3 l=1.0-g;vec3 i1=min(g.xyz,l.zxy);vec3 i2=max(g.xyz,l.zxy);vec3 x1=x0-i1+C.xxx;vec3 x2=x0-i2+C.yyy;vec3 x3=x0-D.yyy;i=mod289(i);vec4 p=permute(permute(permute(i.z+vec4(0.0,i1.z,i2.z,1.0))+i.y+vec4(0.0,i1.y,i2.y,1.0))+i.x+vec4(0.0,i1.x,i2.x,1.0));float n_=0.142857142857;vec3 ns=n_*D.wyz-D.xzx;vec4 j=p-49.0*floor(p*ns.z*ns.z);vec4 x_=floor(j*ns.z);vec4 y_=floor(j-7.0*x_);vec4 x=x_*ns.x+ns.yyyy;vec4 y=y_*ns.x+ns.yyyy;vec4 h=1.0-abs(x)-abs(y);vec4 b0=vec4(x.xy,y.xy);vec4 b1=vec4(x.zw,y.zw);vec4 s0=floor(b0)*2.0+1.0;vec4 s1=floor(b1)*2.0+1.0;vec4 sh=-step(h,vec4(0.0));vec4 a0=b0.xzyw+s0.xzyw*sh.xxyy;vec4 a1=b1.xzyw+s1.xzyw*sh.zzww;vec3 p0=vec3(a0.xy,h.x);vec3 p1=vec3(a0.zw,h.y);vec3 p2=vec3(a1.xy,h.z);vec3 p3=vec3(a1.zw,h.w);vec4 norm=taylorInvSqrt(vec4(dot(p0,p0),dot(p1,p1),dot(p2,p2),dot(p3,p3)));p0*=norm.x;p1*=norm.y;p2*=norm.z;p3*=norm.w;vec4 m=max(0.6-vec4(dot(x0,x0),dot(x1,x1),dot(x2,x2),dot(x3,x3)),0.0);m=m*m;return 42.0*dot(m*m,vec4(dot(p0,x0),dot(p1,x1),dot(p2,x2),dot(p3,x3)));}vec3 noise3d(vec3 s){float s0=snoise(vec3(s));float s1=snoise(vec3(s.y+31.416,s.z-47.853,s.x+12.793));float s2=snoise(vec3(s.z-233.145,s.x-113.408,s.y-185.31));return vec3(s0,s1,s2);}float ramp(float r){if(r>1.0)return 1.0;if(r<-1.0)return-1.0;return 1.875*r-1.25*r*r*r+0.375*r*r*r*r*r;}float SampleDistance(vec3 p){vec3 SphereCenter=sphere.xyz;float SphereRadius=sphere.w;vec3 u=p-SphereCenter;float d=length(u);return d-SphereRadius;}vec3 ComputeGradient(vec3 p){const float e=0.01;vec3 dx=vec3(e,0,0);vec3 dy=vec3(0,e,0);vec3 dz=vec3(0,0,e);float d=SampleDistance(p);float dfdx=SampleDistance(p+dx)-d;float dfdy=SampleDistance(p+dy)-d;float dfdz=SampleDistance(p+dz)-d;return normalize(vec3(dfdx,dfdy,dfdz));}vec3 BlendVectors(vec3 potential,float alpha,vec3 distanceGradient){float dp=dot(potential,distanceGradient);return alpha*potential+(1.0-alpha)*dp*distanceGradient;}vec3 SamplePotential(vec3 p){vec3 gradient=ComputeGradient(p);float obstacleDistance=SampleDistance(p);float d=abs(ramp(obstacleDistance/1.0));vec3 risingForce=vec3(0.0)-p;risingForce=vec3(-risingForce.z,0.0,risingForce.x);vec3 rpsi=2.0*risingForce;vec3 psi=BlendVectors(noise3d(p)+rpsi,d,gradient);return psi;}vec3 ComputeCurl(vec3 p){const float e=0.0001;vec3 dx=vec3(e,0.0,0.0);vec3 dy=vec3(0.0,e,0.0);vec3 dz=vec3(0.0,0.0,e);float x=SamplePotential(p+dy).z-SamplePotential(p-dy).z-SamplePotential(p+dz).y+SamplePotential(p-dz).y;float y=SamplePotential(p+dz).x-SamplePotential(p-dz).x-SamplePotential(p+dx).z+SamplePotential(p-dx).z;float z=SamplePotential(p+dx).y-SamplePotential(p-dx).y-SamplePotential(p+dy).x+SamplePotential(p-dy).x;const float divisor=1.0/(2.0*e);return normalize(vec3(x,y,z)*divisor);}void main(){float lifetime=data.a;if(lifetime<0.0){updated=initial;}else{vec3 speed=ComputeCurl(data.xyz);updated.xyz=data.xyz+speed*1.0/20.0;updated.a=data.a-0.002;}gl_Position=updated;}"}),tn=Object.freeze({__proto__:null,default:"#version 300 es\nprecision mediump float;void main(){discard;}"}),en=e((function(t,e){function n(t){return t.touches?We.vec2.fromValues(t.touches[0].pageX,t.touches[0].pageY):We.vec2.fromValues(t.clientX,t.clientY)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){var e=this;this.lookAt=function(t,n,r){e.position=t,e.target=n,e.up=r,We.mat4.lookAt(e.viewMatrix,e.position,e.target,e.up),We.mat4.multiply(e.matrix,e.projectionMatrix,e.viewMatrix)},this.perspective=function(t,n,r,o){We.mat4.perspective(e.projectionMatrix,t,n,r,o),We.mat4.multiply(e.matrix,e.projectionMatrix,e.viewMatrix)},this.addEventListener=function(){e.canvas.addEventListener("mousedown",e.onMouseDown),document.addEventListener("mousemove",e.onMouseMove),e.canvas.addEventListener("mouseup",e.onMouseUp),e.canvas.addEventListener("wheel",e.onWheel),e.canvas.addEventListener("touchstart",e.onMouseDown),document.addEventListener("touchmove",e.onMouseMove),e.canvas.addEventListener("touchend",e.onMouseUp)},this.removeEventListener=function(){e.canvas.removeEventListener("mousedown",e.onMouseDown),document.removeEventListener("mousemove",e.onMouseMove),e.canvas.removeEventListener("mouseup",e.onMouseUp),e.canvas.removeEventListener("wheel",e.onWheel),e.canvas.removeEventListener("touchstart",e.onMouseDown),document.removeEventListener("touchmove",e.onMouseMove),e.canvas.removeEventListener("touchend",e.onMouseUp)},this.onMouseDown=function(t){e.isMouseDown=!0,e.canvas.style.cursor="grabbing",e.prevMousePos=e.getMouseOnCircle(n(t)),We.vec2.copy(e.mousePos,e.prevMousePos)},this.onMouseUp=function(){e.isMouseDown=!1,e.canvas.style.cursor="grab"},this.onMouseMove=function(t){e.isMouseDown&&(We.vec2.copy(e.prevMousePos,e.mousePos),e.mousePos=e.getMouseOnCircle(n(t)))},this.onWheel=function(t){e.zoomStart-=.025*t.deltaY},this.update=function(){var t=We.vec3.create();We.vec3.subtract(t,e.position,e.target);var n=1+.01*(e.zoomEnd-e.zoomStart);We.vec3.scale(t,t,n),e.zoomStart+=(e.zoomEnd-e.zoomStart)*e.easing;var r=We.vec3.fromValues(e.mousePos[0]-e.prevMousePos[0],e.mousePos[1]-e.prevMousePos[1],0),o=We.vec3.length(r);if(o){var a=We.vec3.create();We.vec3.copy(a,t),We.vec3.normalize(a,a);var i=We.vec3.create();We.vec3.copy(i,e.up),We.vec3.normalize(i,i);var s=We.vec3.create();We.vec3.cross(s,i,a),We.vec3.normalize(s,s),We.vec3.scale(s,s,r[0]),We.vec3.scale(i,i,r[1]),We.vec3.add(r,i,s);var u=We.vec3.create();We.vec3.cross(u,r,t),We.vec3.normalize(u,u);var c=We.quat.create();We.quat.setAxisAngle(c,u,o),We.vec3.transformQuat(t,t,c),We.vec3.transformQuat(e.up,e.up,c),We.vec3.copy(e.lastAxis,u),e.lastAngle=o}else if(e.lastAngle>.01){e.lastAngle*=Math.sqrt(1-e.easing);c=We.quat.create();We.quat.setAxisAngle(c,e.lastAxis,e.lastAngle),We.vec3.transformQuat(t,t,c),We.vec3.transformQuat(e.up,e.up,c)}We.vec2.copy(e.prevMousePos,e.mousePos),We.vec3.add(e.position,e.target,t),e.lookAt(e.position,e.target,e.up)},this.canvas=t,this.box=this.canvas.getBoundingClientRect(),this.position=We.vec3.fromValues(0,0,5),this.target=We.vec3.fromValues(0,0,0),this.up=We.vec3.fromValues(0,1,0),this.projectionMatrix=We.mat4.create(),this.viewMatrix=We.mat4.create(),this.matrix=We.mat4.create(),this.easing=.1,this.isMouseDown=!1,this.prevMousePos=We.vec2.fromValues(0,0),this.mousePos=We.vec2.fromValues(0,0),this.zoomStart=0,this.zoomEnd=0,this.lastAxis=We.vec3.create(),this.lastAngle=0,this.addEventListener()}return t.prototype.getMouseOnCircle=function(t){var e=this.box,n=e.left,r=e.top,o=e.width,a=e.height;return We.vec2.fromValues((t[0]-.5*o-n)/(.5*o),(a+2*(r-t[1]))/o)},t}();e.default=r}));t(en);var nn=e((function(t,e){!function(t){function e(t,e){var n=t.__state.conversionName.toString(),r=Math.round(t.r),o=Math.round(t.g),a=Math.round(t.b),i=t.a,s=Math.round(t.h),u=t.s.toFixed(1),c=t.v.toFixed(1);if(e||"THREE_CHAR_HEX"===n||"SIX_CHAR_HEX"===n){for(var l=t.hex.toString(16);l.length<6;)l="0"+l;return"#"+l}return"CSS_RGB"===n?"rgb("+r+","+o+","+a+")":"CSS_RGBA"===n?"rgba("+r+","+o+","+a+","+i+")":"HEX"===n?"0x"+t.hex.toString(16):"RGB_ARRAY"===n?"["+r+","+o+","+a+"]":"RGBA_ARRAY"===n?"["+r+","+o+","+a+","+i+"]":"RGB_OBJ"===n?"{r:"+r+",g:"+o+",b:"+a+"}":"RGBA_OBJ"===n?"{r:"+r+",g:"+o+",b:"+a+",a:"+i+"}":"HSV_OBJ"===n?"{h:"+s+",s:"+u+",v:"+c+"}":"HSVA_OBJ"===n?"{h:"+s+",s:"+u+",v:"+c+",a:"+i+"}":"unknown format"}var n=Array.prototype.forEach,r=Array.prototype.slice,o={BREAK:{},extend:function(t){return this.each(r.call(arguments,1),(function(e){(this.isObject(e)?Object.keys(e):[]).forEach(function(n){this.isUndefined(e[n])||(t[n]=e[n])}.bind(this))}),this),t},defaults:function(t){return this.each(r.call(arguments,1),(function(e){(this.isObject(e)?Object.keys(e):[]).forEach(function(n){this.isUndefined(t[n])&&(t[n]=e[n])}.bind(this))}),this),t},compose:function(){var t=r.call(arguments);return function(){for(var e=r.call(arguments),n=t.length-1;n>=0;n--)e=[t[n].apply(this,e)];return e[0]}},each:function(t,e,r){if(t)if(n&&t.forEach&&t.forEach===n)t.forEach(e,r);else if(t.length===t.length+0){var o,a=void 0;for(a=0,o=t.length;a<o;a++)if(a in t&&e.call(r,t[a],a)===this.BREAK)return}else for(var i in t)if(e.call(r,t[i],i)===this.BREAK)return},defer:function(t){setTimeout(t,0)},debounce:function(t,e,n){var r=void 0;return function(){var o=this,a=arguments;function i(){r=null,n||t.apply(o,a)}var s=n||!r;clearTimeout(r),r=setTimeout(i,e),s&&t.apply(o,a)}},toArray:function(t){return t.toArray?t.toArray():r.call(t)},isUndefined:function(t){return void 0===t},isNull:function(t){return null===t},isNaN:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){return isNaN(t)})),isArray:Array.isArray||function(t){return t.constructor===Array},isObject:function(t){return t===Object(t)},isNumber:function(t){return t===t+0},isString:function(t){return t===t+""},isBoolean:function(t){return!1===t||!0===t},isFunction:function(t){return t instanceof Function}},a=[{litmus:o.isString,conversions:{THREE_CHAR_HEX:{read:function(t){var e=t.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null!==e&&{space:"HEX",hex:parseInt("0x"+e[1].toString()+e[1].toString()+e[2].toString()+e[2].toString()+e[3].toString()+e[3].toString(),0)}},write:e},SIX_CHAR_HEX:{read:function(t){var e=t.match(/^#([A-F0-9]{6})$/i);return null!==e&&{space:"HEX",hex:parseInt("0x"+e[1].toString(),0)}},write:e},CSS_RGB:{read:function(t){var e=t.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==e&&{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3])}},write:e},CSS_RGBA:{read:function(t){var e=t.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==e&&{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3]),a:parseFloat(e[4])}},write:e}}},{litmus:o.isNumber,conversions:{HEX:{read:function(t){return{space:"HEX",hex:t,conversionName:"HEX"}},write:function(t){return t.hex}}}},{litmus:o.isArray,conversions:{RGB_ARRAY:{read:function(t){return 3===t.length&&{space:"RGB",r:t[0],g:t[1],b:t[2]}},write:function(t){return[t.r,t.g,t.b]}},RGBA_ARRAY:{read:function(t){return 4===t.length&&{space:"RGB",r:t[0],g:t[1],b:t[2],a:t[3]}},write:function(t){return[t.r,t.g,t.b,t.a]}}}},{litmus:o.isObject,conversions:{RGBA_OBJ:{read:function(t){return!!(o.isNumber(t.r)&&o.isNumber(t.g)&&o.isNumber(t.b)&&o.isNumber(t.a))&&{space:"RGB",r:t.r,g:t.g,b:t.b,a:t.a}},write:function(t){return{r:t.r,g:t.g,b:t.b,a:t.a}}},RGB_OBJ:{read:function(t){return!!(o.isNumber(t.r)&&o.isNumber(t.g)&&o.isNumber(t.b))&&{space:"RGB",r:t.r,g:t.g,b:t.b}},write:function(t){return{r:t.r,g:t.g,b:t.b}}},HSVA_OBJ:{read:function(t){return!!(o.isNumber(t.h)&&o.isNumber(t.s)&&o.isNumber(t.v)&&o.isNumber(t.a))&&{space:"HSV",h:t.h,s:t.s,v:t.v,a:t.a}},write:function(t){return{h:t.h,s:t.s,v:t.v,a:t.a}}},HSV_OBJ:{read:function(t){return!!(o.isNumber(t.h)&&o.isNumber(t.s)&&o.isNumber(t.v))&&{space:"HSV",h:t.h,s:t.s,v:t.v}},write:function(t){return{h:t.h,s:t.s,v:t.v}}}}}],i=void 0,s=void 0,u=function(){s=!1;var t=arguments.length>1?o.toArray(arguments):arguments[0];return o.each(a,(function(e){if(e.litmus(t))return o.each(e.conversions,(function(e,n){if(i=e.read(t),!1===s&&!1!==i)return s=i,i.conversionName=n,i.conversion=e,o.BREAK})),o.BREAK})),s},c=void 0,l={hsv_to_rgb:function(t,e,n){var r=Math.floor(t/60)%6,o=t/60-Math.floor(t/60),a=n*(1-e),i=n*(1-o*e),s=n*(1-(1-o)*e),u=[[n,s,a],[i,n,a],[a,n,s],[a,i,n],[s,a,n],[n,a,i]][r];return{r:255*u[0],g:255*u[1],b:255*u[2]}},rgb_to_hsv:function(t,e,n){var r=Math.min(t,e,n),o=Math.max(t,e,n),a=o-r,i=void 0;return 0===o?{h:NaN,s:0,v:0}:(i=t===o?(e-n)/a:e===o?2+(n-t)/a:4+(t-e)/a,(i/=6)<0&&(i+=1),{h:360*i,s:a/o,v:o/255})},rgb_to_hex:function(t,e,n){var r=this.hex_with_component(0,2,t);return r=this.hex_with_component(r,1,e),r=this.hex_with_component(r,0,n)},component_from_hex:function(t,e){return t>>8*e&255},hex_with_component:function(t,e,n){return n<<(c=8*e)|t&~(255<<c)}},d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},h=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),p=function t(e,n,r){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,n,r)}if("value"in o)return o.value;var i=o.get;return void 0!==i?i.call(r):void 0},_=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},m=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},v=function(){function t(){if(f(this,t),this.__state=u.apply(this,arguments),!1===this.__state)throw new Error("Failed to interpret color arguments");this.__state.a=this.__state.a||1}return h(t,[{key:"toString",value:function(){return e(this)}},{key:"toHexString",value:function(){return e(this,!0)}},{key:"toOriginal",value:function(){return this.__state.conversion.write(this)}}]),t}();function b(t,e,n){Object.defineProperty(t,e,{get:function(){return"RGB"===this.__state.space||v.recalculateRGB(this,e,n),this.__state[e]},set:function(t){"RGB"!==this.__state.space&&(v.recalculateRGB(this,e,n),this.__state.space="RGB"),this.__state[e]=t}})}function g(t,e){Object.defineProperty(t,e,{get:function(){return"HSV"===this.__state.space||v.recalculateHSV(this),this.__state[e]},set:function(t){"HSV"!==this.__state.space&&(v.recalculateHSV(this),this.__state.space="HSV"),this.__state[e]=t}})}v.recalculateRGB=function(t,e,n){if("HEX"===t.__state.space)t.__state[e]=l.component_from_hex(t.__state.hex,n);else{if("HSV"!==t.__state.space)throw new Error("Corrupted color state");o.extend(t.__state,l.hsv_to_rgb(t.__state.h,t.__state.s,t.__state.v))}},v.recalculateHSV=function(t){var e=l.rgb_to_hsv(t.r,t.g,t.b);o.extend(t.__state,{s:e.s,v:e.v}),o.isNaN(e.h)?o.isUndefined(t.__state.h)&&(t.__state.h=0):t.__state.h=e.h},v.COMPONENTS=["r","g","b","h","s","v","hex","a"],b(v.prototype,"r",2),b(v.prototype,"g",1),b(v.prototype,"b",0),g(v.prototype,"h"),g(v.prototype,"s"),g(v.prototype,"v"),Object.defineProperty(v.prototype,"a",{get:function(){return this.__state.a},set:function(t){this.__state.a=t}}),Object.defineProperty(v.prototype,"hex",{get:function(){return"HEX"!==this.__state.space&&(this.__state.hex=l.rgb_to_hex(this.r,this.g,this.b),this.__state.space="HEX"),this.__state.hex},set:function(t){this.__state.space="HEX",this.__state.hex=t}});var y=function(){function t(e,n){f(this,t),this.initialValue=e[n],this.domElement=document.createElement("div"),this.object=e,this.property=n,this.__onChange=void 0,this.__onFinishChange=void 0}return h(t,[{key:"onChange",value:function(t){return this.__onChange=t,this}},{key:"onFinishChange",value:function(t){return this.__onFinishChange=t,this}},{key:"setValue",value:function(t){return this.object[this.property]=t,this.__onChange&&this.__onChange.call(this,t),this.updateDisplay(),this}},{key:"getValue",value:function(){return this.object[this.property]}},{key:"updateDisplay",value:function(){return this}},{key:"isModified",value:function(){return this.initialValue!==this.getValue()}}]),t}(),M={};o.each({HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},(function(t,e){o.each(t,(function(t){M[t]=e}))}));var x=/(\d+(\.\d+)?)px/;function w(t){if("0"===t||o.isUndefined(t))return 0;var e=t.match(x);return o.isNull(e)?0:parseFloat(e[1])}var A={makeSelectable:function(t,e){void 0!==t&&void 0!==t.style&&(t.onselectstart=e?function(){return!1}:function(){},t.style.MozUserSelect=e?"auto":"none",t.style.KhtmlUserSelect=e?"auto":"none",t.unselectable=e?"on":"off")},makeFullscreen:function(t,e,n){var r=n,a=e;o.isUndefined(a)&&(a=!0),o.isUndefined(r)&&(r=!0),t.style.position="absolute",a&&(t.style.left=0,t.style.right=0),r&&(t.style.top=0,t.style.bottom=0)},fakeEvent:function(t,e,n,r){var a=n||{},i=M[e];if(!i)throw new Error("Event type "+e+" not supported.");var s=document.createEvent(i);switch(i){case"MouseEvents":var u=a.x||a.clientX||0,c=a.y||a.clientY||0;s.initMouseEvent(e,a.bubbles||!1,a.cancelable||!0,window,a.clickCount||1,0,0,u,c,!1,!1,!1,!1,0,null);break;case"KeyboardEvents":var l=s.initKeyboardEvent||s.initKeyEvent;o.defaults(a,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),l(e,a.bubbles||!1,a.cancelable,window,a.ctrlKey,a.altKey,a.shiftKey,a.metaKey,a.keyCode,a.charCode);break;default:s.initEvent(e,a.bubbles||!1,a.cancelable||!0)}o.defaults(s,r),t.dispatchEvent(s)},bind:function(t,e,n,r){var o=r||!1;return t.addEventListener?t.addEventListener(e,n,o):t.attachEvent&&t.attachEvent("on"+e,n),A},unbind:function(t,e,n,r){var o=r||!1;return t.removeEventListener?t.removeEventListener(e,n,o):t.detachEvent&&t.detachEvent("on"+e,n),A},addClass:function(t,e){if(void 0===t.className)t.className=e;else if(t.className!==e){var n=t.className.split(/ +/);-1===n.indexOf(e)&&(n.push(e),t.className=n.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return A},removeClass:function(t,e){if(e)if(t.className===e)t.removeAttribute("class");else{var n=t.className.split(/ +/),r=n.indexOf(e);-1!==r&&(n.splice(r,1),t.className=n.join(" "))}else t.className=void 0;return A},hasClass:function(t,e){return new RegExp("(?:^|\\s+)"+e+"(?:\\s+|$)").test(t.className)||!1},getWidth:function(t){var e=getComputedStyle(t);return w(e["border-left-width"])+w(e["border-right-width"])+w(e["padding-left"])+w(e["padding-right"])+w(e.width)},getHeight:function(t){var e=getComputedStyle(t);return w(e["border-top-width"])+w(e["border-bottom-width"])+w(e["padding-top"])+w(e["padding-bottom"])+w(e.height)},getOffset:function(t){var e=t,n={left:0,top:0};if(e.offsetParent)do{n.left+=e.offsetLeft,n.top+=e.offsetTop,e=e.offsetParent}while(e);return n},isActive:function(t){return t===document.activeElement&&(t.type||t.href)}},E=function(t){function e(t,n){f(this,e);var r=m(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)),o=r;return r.__prev=r.getValue(),r.__checkbox=document.createElement("input"),r.__checkbox.setAttribute("type","checkbox"),A.bind(r.__checkbox,"change",(function(){o.setValue(!o.__prev)}),!1),r.domElement.appendChild(r.__checkbox),r.updateDisplay(),r}return _(e,t),h(e,[{key:"setValue",value:function(t){var n=p(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setValue",this).call(this,t);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),n}},{key:"updateDisplay",value:function(){return!0===this.getValue()?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0,this.__prev=!0):(this.__checkbox.checked=!1,this.__prev=!1),p(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(y),S=function(t){function e(t,n,r){f(this,e);var a=m(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)),i=r,s=a;if(a.__select=document.createElement("select"),o.isArray(i)){var u={};o.each(i,(function(t){u[t]=t})),i=u}return o.each(i,(function(t,e){var n=document.createElement("option");n.innerHTML=e,n.setAttribute("value",t),s.__select.appendChild(n)})),a.updateDisplay(),A.bind(a.__select,"change",(function(){var t=this.options[this.selectedIndex].value;s.setValue(t)})),a.domElement.appendChild(a.__select),a}return _(e,t),h(e,[{key:"setValue",value:function(t){var n=p(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setValue",this).call(this,t);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),n}},{key:"updateDisplay",value:function(){return A.isActive(this.__select)?this:(this.__select.value=this.getValue(),p(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this))}}]),e}(y),C=function(t){function e(t,n){f(this,e);var r=m(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)),o=r;function a(){o.setValue(o.__input.value)}return r.__input=document.createElement("input"),r.__input.setAttribute("type","text"),A.bind(r.__input,"keyup",a),A.bind(r.__input,"change",a),A.bind(r.__input,"blur",(function(){o.__onFinishChange&&o.__onFinishChange.call(o,o.getValue())})),A.bind(r.__input,"keydown",(function(t){13===t.keyCode&&this.blur()})),r.updateDisplay(),r.domElement.appendChild(r.__input),r}return _(e,t),h(e,[{key:"updateDisplay",value:function(){return A.isActive(this.__input)||(this.__input.value=this.getValue()),p(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(y);function O(t){var e=t.toString();return e.indexOf(".")>-1?e.length-e.indexOf(".")-1:0}var k=function(t){function e(t,n,r){f(this,e);var a=m(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)),i=r||{};return a.__min=i.min,a.__max=i.max,a.__step=i.step,o.isUndefined(a.__step)?0===a.initialValue?a.__impliedStep=1:a.__impliedStep=Math.pow(10,Math.floor(Math.log(Math.abs(a.initialValue))/Math.LN10))/10:a.__impliedStep=a.__step,a.__precision=O(a.__impliedStep),a}return _(e,t),h(e,[{key:"setValue",value:function(t){var n=t;return void 0!==this.__min&&n<this.__min?n=this.__min:void 0!==this.__max&&n>this.__max&&(n=this.__max),void 0!==this.__step&&n%this.__step!=0&&(n=Math.round(n/this.__step)*this.__step),p(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setValue",this).call(this,n)}},{key:"min",value:function(t){return this.__min=t,this}},{key:"max",value:function(t){return this.__max=t,this}},{key:"step",value:function(t){return this.__step=t,this.__impliedStep=t,this.__precision=O(t),this}}]),e}(y),R=function(t){function e(t,n,r){f(this,e);var a=m(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,r));a.__truncationSuspended=!1;var i=a,s=void 0;function u(){i.__onFinishChange&&i.__onFinishChange.call(i,i.getValue())}function c(t){var e=s-t.clientY;i.setValue(i.getValue()+e*i.__impliedStep),s=t.clientY}function l(){A.unbind(window,"mousemove",c),A.unbind(window,"mouseup",l),u()}return a.__input=document.createElement("input"),a.__input.setAttribute("type","text"),A.bind(a.__input,"change",(function(){var t=parseFloat(i.__input.value);o.isNaN(t)||i.setValue(t)})),A.bind(a.__input,"blur",(function(){u()})),A.bind(a.__input,"mousedown",(function(t){A.bind(window,"mousemove",c),A.bind(window,"mouseup",l),s=t.clientY})),A.bind(a.__input,"keydown",(function(t){13===t.keyCode&&(i.__truncationSuspended=!0,this.blur(),i.__truncationSuspended=!1,u())})),a.updateDisplay(),a.domElement.appendChild(a.__input),a}return _(e,t),h(e,[{key:"updateDisplay",value:function(){var t,n,r;return this.__input.value=this.__truncationSuspended?this.getValue():(t=this.getValue(),n=this.__precision,r=Math.pow(10,n),Math.round(t*r)/r),p(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(k);function P(t,e,n,r,o){return r+(t-e)/(n-e)*(o-r)}var T=function(t){function e(t,n,r,o,a){f(this,e);var i=m(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,{min:r,max:o,step:a})),s=i;function u(t){t.preventDefault();var e=s.__background.getBoundingClientRect();return s.setValue(P(t.clientX,e.left,e.right,s.__min,s.__max)),!1}function c(){A.unbind(window,"mousemove",u),A.unbind(window,"mouseup",c),s.__onFinishChange&&s.__onFinishChange.call(s,s.getValue())}function l(t){var e=t.touches[0].clientX,n=s.__background.getBoundingClientRect();s.setValue(P(e,n.left,n.right,s.__min,s.__max))}function d(){A.unbind(window,"touchmove",l),A.unbind(window,"touchend",d),s.__onFinishChange&&s.__onFinishChange.call(s,s.getValue())}return i.__background=document.createElement("div"),i.__foreground=document.createElement("div"),A.bind(i.__background,"mousedown",(function(t){document.activeElement.blur(),A.bind(window,"mousemove",u),A.bind(window,"mouseup",c),u(t)})),A.bind(i.__background,"touchstart",(function(t){1===t.touches.length&&(A.bind(window,"touchmove",l),A.bind(window,"touchend",d),l(t))})),A.addClass(i.__background,"slider"),A.addClass(i.__foreground,"slider-fg"),i.updateDisplay(),i.__background.appendChild(i.__foreground),i.domElement.appendChild(i.__background),i}return _(e,t),h(e,[{key:"updateDisplay",value:function(){var t=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=100*t+"%",p(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(k),z=function(t){function e(t,n,r){f(this,e);var o=m(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)),a=o;return o.__button=document.createElement("div"),o.__button.innerHTML=void 0===r?"Fire":r,A.bind(o.__button,"click",(function(t){return t.preventDefault(),a.fire(),!1})),A.addClass(o.__button,"button"),o.domElement.appendChild(o.__button),o}return _(e,t),h(e,[{key:"fire",value:function(){this.__onChange&&this.__onChange.call(this),this.getValue().call(this.object),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue())}}]),e}(y),F=function(t){function e(t,n){f(this,e);var r=m(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));r.__color=new v(r.getValue()),r.__temp=new v(0);var a=r;r.domElement=document.createElement("div"),A.makeSelectable(r.domElement,!1),r.__selector=document.createElement("div"),r.__selector.className="selector",r.__saturation_field=document.createElement("div"),r.__saturation_field.className="saturation-field",r.__field_knob=document.createElement("div"),r.__field_knob.className="field-knob",r.__field_knob_border="2px solid ",r.__hue_knob=document.createElement("div"),r.__hue_knob.className="hue-knob",r.__hue_field=document.createElement("div"),r.__hue_field.className="hue-field",r.__input=document.createElement("input"),r.__input.type="text",r.__input_textShadow="0 1px 1px ",A.bind(r.__input,"keydown",(function(t){13===t.keyCode&&p.call(this)})),A.bind(r.__input,"blur",p),A.bind(r.__selector,"mousedown",(function(){A.addClass(this,"drag").bind(window,"mouseup",(function(){A.removeClass(a.__selector,"drag")}))})),A.bind(r.__selector,"touchstart",(function(){A.addClass(this,"drag").bind(window,"touchend",(function(){A.removeClass(a.__selector,"drag")}))}));var i,s=document.createElement("div");function c(t){b(t),A.bind(window,"mousemove",b),A.bind(window,"touchmove",b),A.bind(window,"mouseup",d),A.bind(window,"touchend",d)}function l(t){g(t),A.bind(window,"mousemove",g),A.bind(window,"touchmove",g),A.bind(window,"mouseup",h),A.bind(window,"touchend",h)}function d(){A.unbind(window,"mousemove",b),A.unbind(window,"touchmove",b),A.unbind(window,"mouseup",d),A.unbind(window,"touchend",d),_()}function h(){A.unbind(window,"mousemove",g),A.unbind(window,"touchmove",g),A.unbind(window,"mouseup",h),A.unbind(window,"touchend",h),_()}function p(){var t=u(this.value);!1!==t?(a.__color.__state=t,a.setValue(a.__color.toOriginal())):this.value=a.__color.toString()}function _(){a.__onFinishChange&&a.__onFinishChange.call(a,a.__color.toOriginal())}function b(t){-1===t.type.indexOf("touch")&&t.preventDefault();var e=a.__saturation_field.getBoundingClientRect(),n=t.touches&&t.touches[0]||t,r=n.clientX,o=n.clientY,i=(r-e.left)/(e.right-e.left),s=1-(o-e.top)/(e.bottom-e.top);return s>1?s=1:s<0&&(s=0),i>1?i=1:i<0&&(i=0),a.__color.v=s,a.__color.s=i,a.setValue(a.__color.toOriginal()),!1}function g(t){-1===t.type.indexOf("touch")&&t.preventDefault();var e=a.__hue_field.getBoundingClientRect(),n=1-((t.touches&&t.touches[0]||t).clientY-e.top)/(e.bottom-e.top);return n>1?n=1:n<0&&(n=0),a.__color.h=360*n,a.setValue(a.__color.toOriginal()),!1}return o.extend(r.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),o.extend(r.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:r.__field_knob_border+(r.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),o.extend(r.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),o.extend(r.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),o.extend(s.style,{width:"100%",height:"100%",background:"none"}),B(s,"top","rgba(0,0,0,0)","#000"),o.extend(r.__hue_field.style,{width:"15px",height:"100px",border:"1px solid #555",cursor:"ns-resize",position:"absolute",top:"3px",right:"3px"}),(i=r.__hue_field).style.background="",i.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",i.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",i.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",i.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",i.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",o.extend(r.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:r.__input_textShadow+"rgba(0,0,0,0.7)"}),A.bind(r.__saturation_field,"mousedown",c),A.bind(r.__saturation_field,"touchstart",c),A.bind(r.__field_knob,"mousedown",c),A.bind(r.__field_knob,"touchstart",c),A.bind(r.__hue_field,"mousedown",l),A.bind(r.__hue_field,"touchstart",l),r.__saturation_field.appendChild(s),r.__selector.appendChild(r.__field_knob),r.__selector.appendChild(r.__saturation_field),r.__selector.appendChild(r.__hue_field),r.__hue_field.appendChild(r.__hue_knob),r.domElement.appendChild(r.__input),r.domElement.appendChild(r.__selector),r.updateDisplay(),r}return _(e,t),h(e,[{key:"updateDisplay",value:function(){var t=u(this.getValue());if(!1!==t){var e=!1;o.each(v.COMPONENTS,(function(n){if(!o.isUndefined(t[n])&&!o.isUndefined(this.__color.__state[n])&&t[n]!==this.__color.__state[n])return e=!0,{}}),this),e&&o.extend(this.__color.__state,t)}o.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var n=this.__color.v<.5||this.__color.s>.5?255:0,r=255-n;o.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toHexString(),border:this.__field_knob_border+"rgb("+n+","+n+","+n+")"}),this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+"px",this.__temp.s=1,this.__temp.v=1,B(this.__saturation_field,"left","#fff",this.__temp.toHexString()),this.__input.value=this.__color.toString(),o.extend(this.__input.style,{backgroundColor:this.__color.toHexString(),color:"rgb("+n+","+n+","+n+")",textShadow:this.__input_textShadow+"rgba("+r+","+r+","+r+",.7)"})}}]),e}(y),L=["-moz-","-o-","-webkit-","-ms-",""];function B(t,e,n,r){t.style.background="",o.each(L,(function(o){t.style.cssText+="background: "+o+"linear-gradient("+e+", "+n+" 0%, "+r+" 100%); "}))}var D=function(t,e){var n=e||document,r=document.createElement("style");r.type="text/css",r.innerHTML=t;var o=n.getElementsByTagName("head")[0];try{o.appendChild(r)}catch(t){}},j='<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n\n    </div>\n\n  </div>\n\n</div>',I=function(t,e){var n=t[e];return o.isArray(arguments[2])||o.isObject(arguments[2])?new S(t,e,arguments[2]):o.isNumber(n)?o.isNumber(arguments[2])&&o.isNumber(arguments[3])?o.isNumber(arguments[4])?new T(t,e,arguments[2],arguments[3],arguments[4]):new T(t,e,arguments[2],arguments[3]):o.isNumber(arguments[4])?new R(t,e,{min:arguments[2],max:arguments[3],step:arguments[4]}):new R(t,e,{min:arguments[2],max:arguments[3]}):o.isString(n)?new C(t,e):o.isFunction(n)?new z(t,e,""):o.isBoolean(n)?new E(t,e):null},V=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){setTimeout(t,1e3/60)},N=function(){function t(){f(this,t),this.backgroundElement=document.createElement("div"),o.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear",transition:"opacity 0.2s linear"}),A.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),o.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear",transition:"transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var e=this;A.bind(this.backgroundElement,"click",(function(){e.hide()}))}return h(t,[{key:"show",value:function(){var t=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),o.defer((function(){t.backgroundElement.style.opacity=1,t.domElement.style.opacity=1,t.domElement.style.webkitTransform="scale(1)"}))}},{key:"hide",value:function(){var t=this,e=function e(){t.domElement.style.display="none",t.backgroundElement.style.display="none",A.unbind(t.domElement,"webkitTransitionEnd",e),A.unbind(t.domElement,"transitionend",e),A.unbind(t.domElement,"oTransitionEnd",e)};A.bind(this.domElement,"webkitTransitionEnd",e),A.bind(this.domElement,"transitionend",e),A.bind(this.domElement,"oTransitionEnd",e),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"}},{key:"layout",value:function(){this.domElement.style.left=window.innerWidth/2-A.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-A.getHeight(this.domElement)/2+"px"}}]),t}(),H=function(t){if(t&&"undefined"!=typeof window){var e=document.createElement("style");return e.setAttribute("type","text/css"),e.innerHTML=t,document.head.appendChild(e),t}}(".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear;border:0;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button.close-top{position:relative}.dg.main .close-button.close-bottom{position:absolute}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-y:visible}.dg.a.has-save>ul.close-top{margin-top:0}.dg.a.has-save>ul.close-bottom{margin-top:27px}.dg.a.has-save>ul.closed{margin-top:0}.dg.a .save-row{top:0;z-index:1002}.dg.a .save-row.close-top{position:relative}.dg.a .save-row.close-bottom{position:fixed}.dg li{-webkit-transition:height .1s ease-out;-o-transition:height .1s ease-out;-moz-transition:height .1s ease-out;transition:height .1s ease-out;-webkit-transition:overflow .1s linear;-o-transition:overflow .1s linear;-moz-transition:overflow .1s linear;transition:overflow .1s linear}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li>*{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px;overflow:hidden}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%;position:relative}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:7px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .cr.color{overflow:visible}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.color{border-left:3px solid}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2FA1D6}.dg .cr.number input[type=text]{color:#2FA1D6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2FA1D6;max-width:100%}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\n");D(H);var q=function(){try{return!!window.localStorage}catch(t){return!1}}(),U=void 0,G=!0,Y=void 0,X=!1,Q=[],W=function t(e){var n=this,r=e||{};this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),A.addClass(this.domElement,"dg"),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],r=o.defaults(r,{closeOnTop:!1,autoPlace:!0,width:t.DEFAULT_WIDTH}),r=o.defaults(r,{resizable:r.autoPlace,hideable:r.autoPlace}),o.isUndefined(r.load)?r.load={preset:"Default"}:r.preset&&(r.load.preset=r.preset),o.isUndefined(r.parent)&&r.hideable&&Q.push(this),r.resizable=o.isUndefined(r.parent)&&r.resizable,r.autoPlace&&o.isUndefined(r.scrollable)&&(r.scrollable=!0);var a,i=q&&"true"===localStorage.getItem(et(0,"isLocal")),s=void 0,u=void 0;if(Object.defineProperties(this,{parent:{get:function(){return r.parent}},scrollable:{get:function(){return r.scrollable}},autoPlace:{get:function(){return r.autoPlace}},closeOnTop:{get:function(){return r.closeOnTop}},preset:{get:function(){return n.parent?n.getRoot().preset:r.load.preset},set:function(t){n.parent?n.getRoot().preset=t:r.load.preset=t,function(t){for(var e=0;e<t.__preset_select.length;e++)t.__preset_select[e].value===t.preset&&(t.__preset_select.selectedIndex=e)}(this),n.revert()}},width:{get:function(){return r.width},set:function(t){r.width=t,it(n,t)}},name:{get:function(){return r.name},set:function(t){r.name=t,u&&(u.innerHTML=r.name)}},closed:{get:function(){return r.closed},set:function(e){r.closed=e,r.closed?A.addClass(n.__ul,t.CLASS_CLOSED):A.removeClass(n.__ul,t.CLASS_CLOSED),this.onResize(),n.__closeButton&&(n.__closeButton.innerHTML=e?t.TEXT_OPEN:t.TEXT_CLOSED)}},load:{get:function(){return r.load}},useLocalStorage:{get:function(){return i},set:function(t){q&&(i=t,t?A.bind(window,"unload",s):A.unbind(window,"unload",s),localStorage.setItem(et(0,"isLocal"),t))}}}),o.isUndefined(r.parent)){if(this.closed=r.closed||!1,A.addClass(this.domElement,t.CLASS_MAIN),A.makeSelectable(this.domElement,!1),q&&i){n.useLocalStorage=!0;var c=localStorage.getItem(et(0,"gui"));c&&(r.load=JSON.parse(c))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=t.TEXT_CLOSED,A.addClass(this.__closeButton,t.CLASS_CLOSE_BUTTON),r.closeOnTop?(A.addClass(this.__closeButton,t.CLASS_CLOSE_TOP),this.domElement.insertBefore(this.__closeButton,this.domElement.childNodes[0])):(A.addClass(this.__closeButton,t.CLASS_CLOSE_BOTTOM),this.domElement.appendChild(this.__closeButton)),A.bind(this.__closeButton,"click",(function(){n.closed=!n.closed}))}else{void 0===r.closed&&(r.closed=!0);var l=document.createTextNode(r.name);A.addClass(l,"controller-name"),u=K(n,l),A.addClass(this.__ul,t.CLASS_CLOSED),A.addClass(u,"title"),A.bind(u,"click",(function(t){return t.preventDefault(),n.closed=!n.closed,!1})),r.closed||(this.closed=!1)}r.autoPlace&&(o.isUndefined(r.parent)&&(G&&(Y=document.createElement("div"),A.addClass(Y,"dg"),A.addClass(Y,t.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(Y),G=!1),Y.appendChild(this.domElement),A.addClass(this.domElement,t.CLASS_AUTO_PLACE)),this.parent||it(n,r.width)),this.__resizeHandler=function(){n.onResizeDebounced()},A.bind(window,"resize",this.__resizeHandler),A.bind(this.__ul,"webkitTransitionEnd",this.__resizeHandler),A.bind(this.__ul,"transitionend",this.__resizeHandler),A.bind(this.__ul,"oTransitionEnd",this.__resizeHandler),this.onResize(),r.resizable&&at(this),s=function(){q&&"true"===localStorage.getItem(et(0,"isLocal"))&&localStorage.setItem(et(0,"gui"),JSON.stringify(n.getSaveObject()))},this.saveToLocalStorageIfPossible=s,r.parent||((a=n.getRoot()).width+=1,o.defer((function(){a.width-=1})))};function K(t,e,n){var r=document.createElement("li");return e&&r.appendChild(e),n?t.__ul.insertBefore(r,n):t.__ul.appendChild(r),t.onResize(),r}function J(t){A.unbind(window,"resize",t.__resizeHandler),t.saveToLocalStorageIfPossible&&A.unbind(window,"unload",t.saveToLocalStorageIfPossible)}function Z(t,e){var n=t.__preset_select[t.__preset_select.selectedIndex];n.innerHTML=e?n.value+"*":n.value}function $(t,e){var n=t.getRoot(),r=n.__rememberedObjects.indexOf(e.object);if(-1!==r){var o=n.__rememberedObjectIndecesToControllers[r];if(void 0===o&&(o={},n.__rememberedObjectIndecesToControllers[r]=o),o[e.property]=e,n.load&&n.load.remembered){var a=n.load.remembered,i=void 0;if(a[t.preset])i=a[t.preset];else{if(!a.Default)return;i=a.Default}if(i[r]&&void 0!==i[r][e.property]){var s=i[r][e.property];e.initialValue=s,e.setValue(s)}}}}function tt(t,e,n,r){if(void 0===e[n])throw new Error('Object "'+e+'" has no property "'+n+'"');var a=void 0;if(r.color)a=new F(e,n);else{var i=[e,n].concat(r.factoryArgs);a=I.apply(t,i)}r.before instanceof y&&(r.before=r.before.__li),$(t,a),A.addClass(a.domElement,"c");var s=document.createElement("span");A.addClass(s,"property-name"),s.innerHTML=a.property;var u=document.createElement("div");u.appendChild(s),u.appendChild(a.domElement);var c=K(t,u,r.before);return A.addClass(c,W.CLASS_CONTROLLER_ROW),a instanceof F?A.addClass(c,"color"):A.addClass(c,d(a.getValue())),function(t,e,n){if(n.__li=e,n.__gui=t,o.extend(n,{options:function(e){if(arguments.length>1){var r=n.__li.nextElementSibling;return n.remove(),tt(t,n.object,n.property,{before:r,factoryArgs:[o.toArray(arguments)]})}if(o.isArray(e)||o.isObject(e)){var a=n.__li.nextElementSibling;return n.remove(),tt(t,n.object,n.property,{before:a,factoryArgs:[e]})}},name:function(t){return n.__li.firstElementChild.firstElementChild.innerHTML=t,n},listen:function(){return n.__gui.listen(n),n},remove:function(){return n.__gui.remove(n),n}}),n instanceof T){var r=new R(n.object,n.property,{min:n.__min,max:n.__max,step:n.__step});o.each(["updateDisplay","onChange","onFinishChange","step","min","max"],(function(t){var e=n[t],o=r[t];n[t]=r[t]=function(){var t=Array.prototype.slice.call(arguments);return o.apply(r,t),e.apply(n,t)}})),A.addClass(e,"has-slider"),n.domElement.insertBefore(r.domElement,n.domElement.firstElementChild)}else if(n instanceof R){var a=function(e){if(o.isNumber(n.__min)&&o.isNumber(n.__max)){var r=n.__li.firstElementChild.firstElementChild.innerHTML,a=n.__gui.__listening.indexOf(n)>-1;n.remove();var i=tt(t,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[n.__min,n.__max,n.__step]});return i.name(r),a&&i.listen(),i}return e};n.min=o.compose(a,n.min),n.max=o.compose(a,n.max)}else n instanceof E?(A.bind(e,"click",(function(){A.fakeEvent(n.__checkbox,"click")})),A.bind(n.__checkbox,"click",(function(t){t.stopPropagation()}))):n instanceof z?(A.bind(e,"click",(function(){A.fakeEvent(n.__button,"click")})),A.bind(e,"mouseover",(function(){A.addClass(n.__button,"hover")})),A.bind(e,"mouseout",(function(){A.removeClass(n.__button,"hover")}))):n instanceof F&&(A.addClass(e,"color"),n.updateDisplay=o.compose((function(t){return e.style.borderLeftColor=n.__color.toString(),t}),n.updateDisplay),n.updateDisplay());n.setValue=o.compose((function(e){return t.getRoot().__preset_select&&n.isModified()&&Z(t.getRoot(),!0),e}),n.setValue)}(t,c,a),t.__controllers.push(a),a}function et(t,e){return document.location.href+"."+e}function nt(t,e,n){var r=document.createElement("option");r.innerHTML=e,r.value=e,t.__preset_select.appendChild(r),n&&(t.__preset_select.selectedIndex=t.__preset_select.length-1)}function rt(t,e){e.style.display=t.useLocalStorage?"block":"none"}function ot(t){var e=t.__save_row=document.createElement("li");A.addClass(t.domElement,"has-save"),t.__ul.insertBefore(e,t.__ul.firstChild),A.addClass(e,"save-row");var n=document.createElement("span");n.innerHTML="&nbsp;",A.addClass(n,"button gears");var r=document.createElement("span");r.innerHTML="Save",A.addClass(r,"button"),A.addClass(r,"save");var a=document.createElement("span");a.innerHTML="New",A.addClass(a,"button"),A.addClass(a,"save-as");var i=document.createElement("span");i.innerHTML="Revert",A.addClass(i,"button"),A.addClass(i,"revert");var s=t.__preset_select=document.createElement("select");if(t.load&&t.load.remembered?o.each(t.load.remembered,(function(e,n){nt(t,n,n===t.preset)})):nt(t,"Default",!1),A.bind(s,"change",(function(){for(var e=0;e<t.__preset_select.length;e++)t.__preset_select[e].innerHTML=t.__preset_select[e].value;t.preset=this.value})),e.appendChild(s),e.appendChild(n),e.appendChild(r),e.appendChild(a),e.appendChild(i),q){var u=document.getElementById("dg-local-explain"),c=document.getElementById("dg-local-storage");document.getElementById("dg-save-locally").style.display="block","true"===localStorage.getItem(et(0,"isLocal"))&&c.setAttribute("checked","checked"),rt(t,u),A.bind(c,"change",(function(){t.useLocalStorage=!t.useLocalStorage,rt(t,u)}))}var l=document.getElementById("dg-new-constructor");A.bind(l,"keydown",(function(t){!t.metaKey||67!==t.which&&67!==t.keyCode||U.hide()})),A.bind(n,"click",(function(){l.innerHTML=JSON.stringify(t.getSaveObject(),void 0,2),U.show(),l.focus(),l.select()})),A.bind(r,"click",(function(){t.save()})),A.bind(a,"click",(function(){var e=prompt("Enter a new preset name.");e&&t.saveAs(e)})),A.bind(i,"click",(function(){t.revert()}))}function at(t){var e=void 0;function n(n){return n.preventDefault(),t.width+=e-n.clientX,t.onResize(),e=n.clientX,!1}function r(){A.removeClass(t.__closeButton,W.CLASS_DRAG),A.unbind(window,"mousemove",n),A.unbind(window,"mouseup",r)}function a(o){return o.preventDefault(),e=o.clientX,A.addClass(t.__closeButton,W.CLASS_DRAG),A.bind(window,"mousemove",n),A.bind(window,"mouseup",r),!1}t.__resize_handle=document.createElement("div"),o.extend(t.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"}),A.bind(t.__resize_handle,"mousedown",a),A.bind(t.__closeButton,"mousedown",a),t.domElement.insertBefore(t.__resize_handle,t.domElement.firstElementChild)}function it(t,e){t.domElement.style.width=e+"px",t.__save_row&&t.autoPlace&&(t.__save_row.style.width=e+"px"),t.__closeButton&&(t.__closeButton.style.width=e+"px")}function st(t,e){var n={};return o.each(t.__rememberedObjects,(function(r,a){var i={},s=t.__rememberedObjectIndecesToControllers[a];o.each(s,(function(t,n){i[n]=e?t.initialValue:t.getValue()})),n[a]=i})),n}W.toggleHide=function(){X=!X,o.each(Q,(function(t){t.domElement.style.display=X?"none":""}))},W.CLASS_AUTO_PLACE="a",W.CLASS_AUTO_PLACE_CONTAINER="ac",W.CLASS_MAIN="main",W.CLASS_CONTROLLER_ROW="cr",W.CLASS_TOO_TALL="taller-than-window",W.CLASS_CLOSED="closed",W.CLASS_CLOSE_BUTTON="close-button",W.CLASS_CLOSE_TOP="close-top",W.CLASS_CLOSE_BOTTOM="close-bottom",W.CLASS_DRAG="drag",W.DEFAULT_WIDTH=245,W.TEXT_CLOSED="Close Controls",W.TEXT_OPEN="Open Controls",W._keydownHandler=function(t){"text"===document.activeElement.type||72!==t.which&&72!==t.keyCode||W.toggleHide()},A.bind(window,"keydown",W._keydownHandler,!1),o.extend(W.prototype,{add:function(t,e){return tt(this,t,e,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(t,e){return tt(this,t,e,{color:!0})},remove:function(t){this.__ul.removeChild(t.__li),this.__controllers.splice(this.__controllers.indexOf(t),1);var e=this;o.defer((function(){e.onResize()}))},destroy:function(){if(this.parent)throw new Error("Only the root GUI should be removed with .destroy(). For subfolders, use gui.removeFolder(folder) instead.");this.autoPlace&&Y.removeChild(this.domElement);var t=this;o.each(this.__folders,(function(e){t.removeFolder(e)})),A.unbind(window,"keydown",W._keydownHandler,!1),J(this)},addFolder:function(t){if(void 0!==this.__folders[t])throw new Error('You already have a folder in this GUI by the name "'+t+'"');var e={name:t,parent:this};e.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[t]&&(e.closed=this.load.folders[t].closed,e.load=this.load.folders[t]);var n=new W(e);this.__folders[t]=n;var r=K(this,n.domElement);return A.addClass(r,"folder"),n},removeFolder:function(t){this.__ul.removeChild(t.domElement.parentElement),delete this.__folders[t.name],this.load&&this.load.folders&&this.load.folders[t.name]&&delete this.load.folders[t.name],J(t);var e=this;o.each(t.__folders,(function(e){t.removeFolder(e)})),o.defer((function(){e.onResize()}))},open:function(){this.closed=!1},close:function(){this.closed=!0},hide:function(){this.domElement.style.display="none"},show:function(){this.domElement.style.display=""},onResize:function(){var t=this.getRoot();if(t.scrollable){var e=A.getOffset(t.__ul).top,n=0;o.each(t.__ul.childNodes,(function(e){t.autoPlace&&e===t.__save_row||(n+=A.getHeight(e))})),window.innerHeight-e-20<n?(A.addClass(t.domElement,W.CLASS_TOO_TALL),t.__ul.style.height=window.innerHeight-e-20+"px"):(A.removeClass(t.domElement,W.CLASS_TOO_TALL),t.__ul.style.height="auto")}t.__resize_handle&&o.defer((function(){t.__resize_handle.style.height=t.__ul.offsetHeight+"px"})),t.__closeButton&&(t.__closeButton.style.width=t.width+"px")},onResizeDebounced:o.debounce((function(){this.onResize()}),50),remember:function(){if(o.isUndefined(U)&&((U=new N).domElement.innerHTML=j),this.parent)throw new Error("You can only call remember on a top level GUI.");var t=this;o.each(Array.prototype.slice.call(arguments),(function(e){0===t.__rememberedObjects.length&&ot(t),-1===t.__rememberedObjects.indexOf(e)&&t.__rememberedObjects.push(e)})),this.autoPlace&&it(this,this.width)},getRoot:function(){for(var t=this;t.parent;)t=t.parent;return t},getSaveObject:function(){var t=this.load;return t.closed=this.closed,this.__rememberedObjects.length>0&&(t.preset=this.preset,t.remembered||(t.remembered={}),t.remembered[this.preset]=st(this)),t.folders={},o.each(this.__folders,(function(e,n){t.folders[n]=e.getSaveObject()})),t},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=st(this),Z(this,!1),this.saveToLocalStorageIfPossible()},saveAs:function(t){this.load.remembered||(this.load.remembered={},this.load.remembered.Default=st(this,!0)),this.load.remembered[t]=st(this),this.preset=t,nt(this,t,!0),this.saveToLocalStorageIfPossible()},revert:function(t){o.each(this.__controllers,(function(e){this.getRoot().load.remembered?$(t||this.getRoot(),e):e.setValue(e.initialValue),e.__onFinishChange&&e.__onFinishChange.call(e,e.getValue())}),this),o.each(this.__folders,(function(t){t.revert(t)})),t||Z(this.getRoot(),!1)},listen:function(t){var e=0===this.__listening.length;this.__listening.push(t),e&&function t(e){0!==e.length&&V.call(window,(function(){t(e)})),o.each(e,(function(t){t.updateDisplay()}))}(this.__listening)},updateDisplay:function(){o.each(this.__controllers,(function(t){t.updateDisplay()})),o.each(this.__folders,(function(t){t.updateDisplay()}))}});var ut={Color:v,math:l,interpret:u},ct={Controller:y,BooleanController:E,OptionController:S,StringController:C,NumberController:k,NumberControllerBox:R,NumberControllerSlider:T,FunctionController:z,ColorController:F},lt={dom:A},dt={GUI:W},ft=W,ht={color:ut,controllers:ct,dom:lt,gui:dt,GUI:ft};t.color=ut,t.controllers=ct,t.dom=lt,t.gui=dt,t.GUI=ft,t.default=ht,Object.defineProperty(t,"__esModule",{value:!0})}(e)}));t(nn);var rn=e((function(t,e){var n;t.exports=((n=function(){function t(t){return o.appendChild(t.dom),t}function e(t){for(var e=0;e<o.children.length;e++)o.children[e].style.display=e===t?"block":"none";r=t}var r=0,o=document.createElement("div");o.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",o.addEventListener("click",(function(t){t.preventDefault(),e(++r%o.children.length)}),!1);var a=(performance||Date).now(),i=a,s=0,u=t(new n.Panel("FPS","#0ff","#002")),c=t(new n.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var l=t(new n.Panel("MB","#f08","#201"));return e(0),{REVISION:16,dom:o,addPanel:t,showPanel:e,begin:function(){a=(performance||Date).now()},end:function(){s++;var t=(performance||Date).now();if(c.update(t-a,200),t>i+1e3&&(u.update(1e3*s/(t-i),100),i=t,s=0,l)){var e=performance.memory;l.update(e.usedJSHeapSize/1048576,e.jsHeapSizeLimit/1048576)}return t},update:function(){a=this.end()},domElement:o,setMode:e}}).Panel=function(t,e,n){var r=1/0,o=0,a=Math.round,i=a(window.devicePixelRatio||1),s=80*i,u=48*i,c=3*i,l=2*i,d=3*i,f=15*i,h=74*i,p=30*i,_=document.createElement("canvas");_.width=s,_.height=u,_.style.cssText="width:80px;height:48px";var m=_.getContext("2d");return m.font="bold "+9*i+"px Helvetica,Arial,sans-serif",m.textBaseline="top",m.fillStyle=n,m.fillRect(0,0,s,u),m.fillStyle=e,m.fillText(t,c,l),m.fillRect(d,f,h,p),m.fillStyle=n,m.globalAlpha=.9,m.fillRect(d,f,h,p),{dom:_,update:function(u,v){r=Math.min(r,u),o=Math.max(o,u),m.fillStyle=n,m.globalAlpha=1,m.fillRect(0,0,s,f),m.fillStyle=e,m.fillText(a(u)+" "+t+" ("+a(r)+"-"+a(o)+")",c,l),m.drawImage(_,d+i,f,h-i,p,d,f,h-i,p),m.fillRect(d+h-i,f,i,p),m.fillStyle=n,m.globalAlpha=.9,m.fillRect(d+h-i,f,i,a((1-u/v)*p))}}},n)})),on=n(Je),an=n(Ze),sn=n($e),un=n(tn);t(e((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=l.__importDefault(on),r=l.__importDefault(an),o=l.__importDefault(sn),a=l.__importDefault(un),i=l.__importDefault(en),s=document.getElementById("canvas"),u=s.getContext("webgl2");if(!u)throw new Error("Failed to get WebGL2 context.");var c=Math.sqrt(Math.pow(2,Math.ceil(Math.log2(65536)))),d=c*c,f={x:0,y:0,z:0,radius:3},h=new i.default(s);h.lookAt(We.vec3.fromValues(0,0,16),We.vec3.fromValues(0,0,0),We.vec3.fromValues(0,1,0));for(var p=Ke.createProgram(u,o.default,a.default,["updated"]),_=Ke.createProgram(u,n.default,r.default),m=new Array(4*d),v=0;v<d;v++){var b=4*v;m[b]=.2*Math.random()-.1,m[b+1]=-6*Math.random()-6,m[b+2]=.2*Math.random()-.1,m[b+3]=.5+.5*Math.random()}var g=new Float32Array(m),y=[u.createBuffer(),u.createBuffer(),u.createBuffer()];if(-1!=y.indexOf(null))throw new Error("Failed to create buffer");u.bindBuffer(u.ARRAY_BUFFER,y[0]),u.bufferData(u.ARRAY_BUFFER,g,u.DYNAMIC_COPY),u.bindBuffer(u.ARRAY_BUFFER,y[1]),u.bufferData(u.ARRAY_BUFFER,4*m.length,u.DYNAMIC_COPY),u.bindBuffer(u.ARRAY_BUFFER,y[2]),u.bufferData(u.ARRAY_BUFFER,g,u.STATIC_DRAW);var M=[u.createVertexArray(),u.createVertexArray()];if(-1!==M.indexOf(null))throw new Error("Failed to create vertex array");u.bindVertexArray(M[0]),u.bindBuffer(u.ARRAY_BUFFER,y[0]),u.enableVertexAttribArray(0),u.vertexAttribPointer(0,4,u.FLOAT,!1,0,0),u.bindBuffer(u.ARRAY_BUFFER,y[2]),u.enableVertexAttribArray(1),u.vertexAttribPointer(1,4,u.FLOAT,!1,0,0),u.bindVertexArray(M[1]),u.bindBuffer(u.ARRAY_BUFFER,y[1]),u.enableVertexAttribArray(0),u.vertexAttribPointer(0,4,u.FLOAT,!1,0,0),u.bindBuffer(u.ARRAY_BUFFER,y[2]),u.enableVertexAttribArray(1),u.vertexAttribPointer(1,4,u.FLOAT,!1,0,0),u.bindVertexArray(M[2]),u.bindBuffer(u.ARRAY_BUFFER,y[1]),u.enableVertexAttribArray(0),u.vertexAttribPointer(0,4,u.FLOAT,!1,0,0),u.vertexAttribDivisor(0,1),u.useProgram(_),u.uniform1f(u.getUniformLocation(_,"size"),1);var x=new rn;x.showPanel(0),document.body.appendChild(x.dom);var w=new nn.GUI;w.add(f,"radius",2,6),w.add(f,"x",-3,3),w.add(f,"y",-2,2);var A=!1;function E(t){s.width=window.innerWidth,s.height=window.innerHeight,s.style.width=s.width+"px",s.style.height=s.height+"px",h.perspective(Math.PI/4,s.width/s.height,1,100),t.viewport(0,0,t.canvas.width,t.canvas.height)}u.clearColor(0,0,0,1),E(u),function t(e){x.begin(),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),e.useProgram(p),e.uniform4fv(e.getUniformLocation(p,"sphere"),[f.x,f.y,f.z,f.radius]),e.bindVertexArray(M[A?1:0]),e.bindBuffer(e.ARRAY_BUFFER,y[A?1:0]),e.bindBufferBase(e.TRANSFORM_FEEDBACK_BUFFER,0,y[A?0:1]),A=!A,e.enable(e.RASTERIZER_DISCARD),e.beginTransformFeedback(e.POINTS),e.drawArrays(e.POINTS,0,d),e.endTransformFeedback(),e.bindBufferBase(e.TRANSFORM_FEEDBACK_BUFFER,0,null),e.disable(e.RASTERIZER_DISCARD),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),e.useProgram(_),h.update(),e.uniformMatrix4fv(e.getUniformLocation(_,"camera"),!1,h.matrix),e.bindVertexArray(M[2]),e.drawArraysInstanced(e.POINTS,0,1,d),x.end(),window.requestAnimationFrame((function(){return t(e)}))}(u),window.addEventListener("resize",(function(){return E(u)}))})))}();
//# sourceMappingURL=bundle.js.map
